<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprechbattle - DTZ Edition</title>
    
    <!-- Goatcounter Analytics -->
    <script data-goatcounter="https://aguitoo.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            color: white;
            overflow: hidden;
        }

        .screen {
            width: 100vw;
            height: 100vh;
            display: none;
            position: relative;
        }

        .screen.active {
            display: flex;
        }

        /* INDEX SCREEN */
        #indexScreen {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .index-title {
            font-size: 3.5em;
            margin-bottom: 20px;
            text-align: center;
        }

        .index-subtitle {
            font-size: 1.5em;
            margin-bottom: 50px;
            opacity: 0.9;
            text-align: center;
        }

        .mode-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            width: 100%;
        }

        .mode-card {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid rgba(255,255,255,0.3);
        }

        .mode-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.6);
        }

        .mode-card-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .mode-card-title {
            font-size: 2em;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .mode-card-description {
            font-size: 1.1em;
            line-height: 1.5;
            opacity: 0.9;
        }

        /* FORMULIERUNGSHILFEN - FLOATING BUTTON */
        .help-float-button {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.5);
            transition: all 0.3s;
            z-index: 1001;
            border: 3px solid rgba(255,255,255,0.3);
        }

        .help-float-button.visible {
            display: flex;
        }

        .help-float-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(102, 126, 234, 0.7);
        }

        .help-float-button:active {
            transform: scale(0.95);
        }

        /* FORMULIERUNGSHILFEN - MODAL */
        .help-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .help-modal.active {
            display: flex;
        }

        .help-modal-content {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 20px;
            max-width: 900px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            position: relative;
        }

        .help-modal-header {
            padding: 25px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .help-modal-title {
            font-size: 1.8em;
            font-weight: bold;
        }

        .help-modal-close {
            font-size: 2em;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            transition: all 0.2s;
        }

        .help-modal-close:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }

        .help-modal-body {
            padding: 20px 30px 30px 30px;
        }

        .category-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 18px 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(102, 126, 234, 0.5);
            border-radius: 12px;
            color: white;
            font-size: 1.05em;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .category-btn:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        .category-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .phrases-container {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            display: none;
        }

        .phrases-container.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .phrases-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .phrases-grid {
            display: grid;
            gap: 10px;
        }

        .help-phrase {
            padding: 15px 18px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            font-size: 1.05em;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 4px solid #667eea;
        }

        .help-phrase:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: translateX(8px);
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }

        /* EXERCISE COMPONENTS */
        .exercise-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0 100px 0;
            padding: 0 20px;
        }

        .exercise-card {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .exercise-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            border-color: rgba(102, 126, 234, 0.6);
        }

        .exercise-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .exercise-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .exercise-card p {
            opacity: 0.9;
            font-size: 1em;
        }

        .exercise-header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
        }

        .exercise-progress {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            font-size: 1.1em;
        }

        .progress-bar {
            flex: 1;
            max-width: 400px;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #11998e, #38ef7d);
            width: 0%;
            transition: width 0.3s;
        }

        .exercise-container {
            max-width: 900px;
            margin: 0 auto 100px auto;
            padding: 20px;
        }

        .question-box {
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .question-text {
            font-size: 1.4em;
            font-weight: 500;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 18px 25px;
            font-size: 1.1em;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            color: #333;
        }

        .option-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateX(5px);
        }

        .option-btn.selected {
            background: rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .option-btn.correct {
            background: rgba(56, 239, 125, 0.3);
            border-color: #38ef7d;
        }

        .option-btn.wrong {
            background: rgba(255, 68, 68, 0.3);
            border-color: #ff4444;
        }

        .option-btn:disabled {
            cursor: not-allowed;
        }

        .feedback-box {
            background: rgba(102, 126, 234, 0.2);
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .feedback-box.show {
            display: block;
            animation: slideIn 0.3s;
        }

        .feedback-box.correct {
            background: rgba(56, 239, 125, 0.2);
            border-left-color: #38ef7d;
        }

        .feedback-box.wrong {
            background: rgba(255, 68, 68, 0.2);
            border-left-color: #ff4444;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .feedback-text {
            font-size: 1.1em;
            line-height: 1.5;
        }

        /* Zuordnungs√ºbung */
        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .matching-column {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .matching-item {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .matching-item:hover {
            background: rgba(102, 126, 234, 0.2);
        }

        .matching-item.selected {
            background: rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .matching-item.matched {
            background: rgba(56, 239, 125, 0.2);
            border-color: #38ef7d;
            cursor: default;
        }

        /* L√ºckentext */
        .gap-text {
            font-size: 1.2em;
            line-height: 2;
        }

        .gap-input {
            display: inline-block;
            border: none;
            border-bottom: 2px solid #667eea;
            background: rgba(102, 126, 234, 0.1);
            padding: 5px 10px;
            margin: 0 5px;
            font-size: 1em;
            min-width: 120px;
            text-align: center;
            border-radius: 5px;
        }

        .gap-input.correct {
            background: rgba(56, 239, 125, 0.2);
            border-bottom-color: #38ef7d;
        }

        .gap-input.wrong {
            background: rgba(255, 68, 68, 0.2);
            border-bottom-color: #ff4444;
        }

        /* Sortierbare Liste */
        .sortable-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .sortable-item {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 10px;
            padding: 15px;
            cursor: move;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .sortable-item:hover {
            background: rgba(102, 126, 234, 0.2);
        }

        .drag-handle {
            font-size: 1.5em;
            cursor: grab;
        }

        .drag-handle:active {
            cursor: grabbing;
        }

        .sortable-item.dragging {
            opacity: 0.5;
        }

        /* SETUP SCREEN */
        #setupScreen {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            flex-direction: column;
            padding: 30px;
        }

        .setup-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .setup-header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
        }

        .setup-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .setup-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            flex: 1;
            overflow-y: auto;
        }

        .team-setup {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            backdrop-filter: blur(10px);
        }

        .team-setup-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(255,255,255,0.3);
        }

        .team-icon {
            font-size: 2em;
        }

        .team-name {
            font-size: 1.3em;
            font-weight: bold;
        }

        .participants-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .participant-row {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .participant-input {
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 6px;
            padding: 8px;
            color: white;
            font-size: 0.95em;
            flex: 1;
        }

        .participant-input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .level-buttons {
            display: flex;
            gap: 4px;
        }

        .level-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 50%;
            font-size: 1.2em;
            cursor: pointer;
            opacity: 0.4;
            transition: all 0.2s;
        }

        .level-btn:hover {
            opacity: 0.7;
            transform: scale(1.1);
        }

        .level-btn.active {
            opacity: 1;
            transform: scale(1.15);
        }

        .level-btn.rubin {
            background: #ff4444;
        }

        .level-btn.smaragd {
            background: #44ff44;
        }

        .level-btn.amethyst {
            background: #aa44ff;
        }

        .setup-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .btn-home {
            background: rgba(255,255,255,0.15);
            color: white;
            border: 2px solid rgba(255,255,255,0.4);
        }

        .btn-home:hover {
            background: rgba(255,255,255,0.25);
            border-color: rgba(255,255,255,0.6);
        }

        /* BREADCRUMB NAVIGATION */
        .breadcrumb {
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .breadcrumb-item {
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0.7;
        }

        .breadcrumb-item.active {
            opacity: 1;
            font-weight: bold;
        }

        .breadcrumb-separator {
            opacity: 0.5;
        }

        /* INFO HINTS */
        .info-hint {
            background: rgba(102, 126, 234, 0.2);
            border-left: 4px solid #667eea;
            padding: 12px 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 0.95em;
        }

        .info-hint-icon {
            display: inline-block;
            margin-right: 8px;
        }

        /* DUELL SETUP */
        #duellSetupScreen {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .duell-setup-container {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            backdrop-filter: blur(10px);
        }

        .duell-setup-title {
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 30px;
        }

        .player-setup {
            margin-bottom: 25px;
        }

        .player-label {
            font-size: 1.2em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .player-input {
            width: 100%;
            padding: 12px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .player-input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .level-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .level-select-btn {
            padding: 15px 30px;
            font-size: 1.3em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            color: white;
            opacity: 0.5;
        }

        .level-select-btn.active {
            opacity: 1;
            transform: scale(1.1);
        }

        .level-select-btn.rubin {
            background: linear-gradient(135deg, #ff4444, #cc0000);
        }

        .level-select-btn.smaragd {
            background: linear-gradient(135deg, #44ff44, #00cc00);
        }

        .level-select-btn.amethyst {
            background: linear-gradient(135deg, #aa44ff, #7700cc);
        }

        /* ROULETTE/DIALOG SCREENS */
        #rouletteScreen, #duellGameScreen, #uebungscampScreen {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            flex-direction: column;
            align-items: center;
            padding: 20px;
            padding-bottom: 60vh;
            overflow-y: auto;
        }

        .game-title {
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 15px;
        }

        .mode-selection {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .mode-btn {
            padding: 15px 25px;
            font-size: 1.3em;
            border: 3px solid white;
            border-radius: 15px;
            background: rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.5;
        }

        .mode-btn:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }

        .level-selection {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .level-roulette-btn {
            padding: 20px 40px;
            font-size: 1.8em;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            color: white;
        }

        .level-roulette-btn.rubin {
            background: linear-gradient(135deg, #ff4444, #cc0000);
        }

        .level-roulette-btn.smaragd {
            background: linear-gradient(135deg, #44ff44, #00cc00);
        }

        .level-roulette-btn.amethyst {
            background: linear-gradient(135deg, #aa44ff, #7700cc);
        }

        .level-roulette-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }

        .situation-display {
            width: 100%;
            display: flex;
            justify-content: center;
            margin: 15px 0;
        }

        .situation-box {
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 25px 30px;
            border-radius: 15px;
            max-width: 1100px;
            width: 90%;
            min-height: 120px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .situation-box h3 {
            font-size: 1.4em;
            margin-bottom: 12px;
            color: #667eea;
            font-weight: 600;
        }

        .situation-box p {
            font-size: 1.5em;
            line-height: 1.5;
            font-weight: 500;
            white-space: pre-line;
        }

        .mystery-words {
            display: flex;
            gap: 12px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .mystery-word {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1.3em;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .roulette-container {
            display: flex;
            gap: 25px;
            align-items: center;
            margin: 15px 0;
        }

        .roulette-slot {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            padding: 15px;
            width: 180px;
            height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .roulette-slot.spinning {
            animation: spin 0.1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        .slot-label {
            font-size: 0.85em;
            opacity: 0.8;
            margin-bottom: 8px;
        }

        .slot-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .slot-team-icon {
            font-size: 2em;
        }

        .slot-name {
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
        }

        .slot-team {
            font-size: 0.75em;
            opacity: 0.8;
        }

        .slot-level {
            font-size: 1.5em;
            margin-top: 5px;
        }

        .vs-symbol {
            font-size: 2.5em;
            font-weight: bold;
            opacity: 0.9;
        }

        .control-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(10px);
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
            z-index: 999;
        }

        .control-btn {
            padding: 12px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .control-btn.start {
            background: linear-gradient(135deg, #11998e, #38ef7d);
            color: white;
        }

        .control-btn.back {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .timer-display {
            background: rgba(0,0,0,0.7);
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 2em;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .setup-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .mode-cards {
                grid-template-columns: 1fr;
            }

            .category-buttons {
                grid-template-columns: repeat(2, 1fr);
            }

            .index-title {
                font-size: 2.5em;
            }

            .mode-card-title {
                font-size: 1.5em;
            }

            .breadcrumb {
                font-size: 0.85em;
                padding: 8px 12px;
            }

            .control-panel {
                flex-wrap: wrap;
            }

            .control-btn {
                font-size: 0.95em;
                padding: 10px 20px;
            }

            .help-float-button {
                width: 60px;
                height: 60px;
                font-size: 1.8em;
                bottom: 80px;
                right: 15px;
            }

            .help-modal-content {
                max-height: 90vh;
                margin: 10px;
            }

            .help-modal-header {
                padding: 20px;
            }

            .help-modal-title {
                font-size: 1.4em;
            }

            .help-modal-body {
                padding: 15px 20px 20px 20px;
            }

            .category-buttons {
                grid-template-columns: repeat(2, 1fr);
            }

            .help-phrase {
                font-size: 0.95em;
                padding: 12px 15px;
            }

            .exercise-selection {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .exercise-card {
                padding: 25px;
            }

            .exercise-card h3 {
                font-size: 1.3em;
            }

            .exercise-progress {
                flex-direction: column;
                gap: 10px;
            }

            .progress-bar {
                max-width: 100%;
                width: 100%;
            }

            .question-text {
                font-size: 1.2em;
            }

            .option-btn {
                font-size: 1em;
                padding: 15px 20px;
            }

            .matching-container {
                grid-template-columns: 1fr;
            }

            .gap-input {
                min-width: 80px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <!-- INDEX SCREEN -->
    <div class="screen active" id="indexScreen">
        <h1 class="index-title">üéØ Sprechbattle</h1>
        <p class="index-subtitle">DTZ Integrationskurs Edition</p>
        
        <div class="info-hint" style="max-width: 800px; margin: 0 auto 30px auto;">
            <span class="info-hint-icon">üëã</span>
            Willkommen! W√§hle einen Modus: <strong>Arena</strong> f√ºr Teamwettbewerbe, <strong>Duell</strong> f√ºr Partner√ºbungen, oder <strong>√úbungscamp</strong> zum Alleine-√úben.
        </div>
        
        <div class="mode-cards">
            <div class="mode-card" onclick="goToArenaSetup()">
                <div class="mode-card-icon">üèüÔ∏è</div>
                <h2 class="mode-card-title">Arena</h2>
                <p class="mode-card-description">4 Teams treten gegeneinander an. Punktesystem mit Edelsteinen und Teamwettbewerb.</p>
            </div>

            <div class="mode-card" onclick="goToDuellSetup()">
                <div class="mode-card-icon">‚öîÔ∏è</div>
                <h2 class="mode-card-title">Duell</h2>
                <p class="mode-card-description">Zwei Spieler √ºben zu zweit. Mit Formulierungshilfen-Konsole.</p>
            </div>

            <div class="mode-card" onclick="goToUebungscamp()">
                <div class="mode-card-icon">üí™</div>
                <h2 class="mode-card-title">√úbungscamp</h2>
                <p class="mode-card-description">Alleine √ºben mit Formulierungshilfen und relevanten W√∂rtern.</p>
            </div>
        </div>
    </div>

    <!-- ARENA SETUP SCREEN -->
    <div class="screen" id="setupScreen">
        <div class="breadcrumb">
            <span class="breadcrumb-item">üè† Start</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item active">üèüÔ∏è Arena Setup</span>
        </div>

        <div class="setup-header">
            <h1>üèüÔ∏è Arena Modus</h1>
            <p>Richtet eure Teams ein</p>
        </div>

        <div class="info-hint">
            <span class="info-hint-icon">üí°</span>
            <strong>Tipp:</strong> Tragt Namen ein und w√§hlt f√ºr jeden das Level (üî¥ Rubin = A1, üü¢ Smaragd = A2/B1, üü£ Amethyst = B1+)
        </div>

        <div class="setup-grid">
            <div class="team-setup">
                <div class="team-setup-header">
                    <div class="team-icon">üåô</div>
                    <div class="team-name">Team Mond</div>
                </div>
                <div class="participants-list" id="participants-mond"></div>
            </div>

            <div class="team-setup">
                <div class="team-setup-header">
                    <div class="team-icon">‚òÄÔ∏è</div>
                    <div class="team-name">Team Sonne</div>
                </div>
                <div class="participants-list" id="participants-sonne"></div>
            </div>

            <div class="team-setup">
                <div class="team-setup-header">
                    <div class="team-icon">‚≠ê</div>
                    <div class="team-name">Team Stern</div>
                </div>
                <div class="participants-list" id="participants-stern"></div>
            </div>

            <div class="team-setup">
                <div class="team-setup-header">
                    <div class="team-icon">üåä</div>
                    <div class="team-name">Team Ozean</div>
                </div>
                <div class="participants-list" id="participants-ozean"></div>
            </div>
        </div>

        <div class="setup-controls">
            <button class="btn btn-primary" onclick="startArena()">üéÆ Arena starten</button>
            <button class="btn btn-home" onclick="showScreen('indexScreen')">üè† Zum Start</button>
        </div>
    </div>

    <!-- DUELL SETUP SCREEN -->
    <div class="screen" id="duellSetupScreen">
        <div class="breadcrumb">
            <span class="breadcrumb-item">üè† Start</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item active">‚öîÔ∏è Duell Setup</span>
        </div>

        <div class="duell-setup-container">
            <h1 class="duell-setup-title">‚öîÔ∏è Duell Modus</h1>
            
            <div class="info-hint">
                <span class="info-hint-icon">üí°</span>
                <strong>Duell-Modus:</strong> Zwei Spieler √ºben zusammen. Mit Formulierungshilfen-Konsole!
            </div>
            
            <div class="player-setup">
                <div class="player-label">Spieler 1:</div>
                <input type="text" id="duellPlayer1" class="player-input" placeholder="Name eingeben...">
            </div>

            <div class="player-setup">
                <div class="player-label">Spieler 2:</div>
                <input type="text" id="duellPlayer2" class="player-input" placeholder="Name eingeben...">
            </div>

            <div class="player-setup">
                <div class="player-label" style="text-align: center;">Level w√§hlen:</div>
                <div class="level-selector">
                    <button class="level-select-btn rubin" onclick="selectDuellLevel('rubin')">üî¥ Rubin</button>
                    <button class="level-select-btn smaragd" onclick="selectDuellLevel('smaragd')">üü¢ Smaragd</button>
                    <button class="level-select-btn amethyst" onclick="selectDuellLevel('amethyst')">üü£ Amethyst</button>
                </div>
            </div>

            <div class="setup-controls">
                <button class="btn btn-primary" onclick="startDuell()">üéÆ Duell starten</button>
                <button class="btn btn-home" onclick="showScreen('indexScreen')">üè† Zum Start</button>
            </div>
        </div>
    </div>

    <!-- ROULETTE SCREEN (Arena) -->
    <div class="screen" id="rouletteScreen">
        <div class="breadcrumb">
            <span class="breadcrumb-item">üè† Start</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item">üèüÔ∏è Arena Setup</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item active">üé∞ Spieler Auslosen</span>
        </div>

        <h1 class="game-title">üé∞ Spieler Auslosen</h1>
        
        <div class="info-hint">
            <span class="info-hint-icon">‚ÑπÔ∏è</span>
            W√§hle zuerst einen Spielmodus, dann ein Level. Das System lost zwei Spieler aus verschiedenen Teams aus!
        </div>
        
        <div class="mode-selection">
            <button class="mode-btn situation" onclick="selectMode('situation')">
                üé≠ Klassischer Dialog
            </button>
            <button class="mode-btn mystery" onclick="selectMode('mystery')">
                üéÅ W√∂rter-Challenge
            </button>
            <button class="mode-btn schnellfeuer" onclick="selectMode('schnellfeuer')">
                ‚ö° Schnellfeuer
            </button>
            <button class="mode-btn eskalation" onclick="selectMode('eskalation')">
                üî• Eskalation
            </button>
        </div>

        <div class="level-selection">
            <button class="level-roulette-btn rubin" onclick="startRouletteByLevel('rubin')">
                üî¥ Rubin
            </button>
            <button class="level-roulette-btn smaragd" onclick="startRouletteByLevel('smaragd')">
                üü¢ Smaragd
            </button>
            <button class="level-roulette-btn amethyst" onclick="startRouletteByLevel('amethyst')">
                üü£ Amethyst
            </button>
        </div>
        
        <div class="situation-display">
            <div class="situation-box">
                <h3 id="situationTitle">W√§hle einen Modus</h3>
                <p id="situationText">Klicke auf einen Spielmodus oben, dann w√§hle ein Level!</p>
                <div id="mysteryWords" class="mystery-words"></div>
            </div>
        </div>
        
        <div class="roulette-container">
            <div class="roulette-slot" id="slot1">
                <div class="slot-label">Spieler 1</div>
                <div class="slot-content">
                    <div class="slot-team-icon">üåô</div>
                    <div class="slot-name">-</div>
                    <div class="slot-team">-</div>
                    <div class="slot-level">-</div>
                </div>
            </div>
            
            <div class="vs-symbol">VS</div>
            
            <div class="roulette-slot" id="slot2">
                <div class="slot-label">Spieler 2</div>
                <div class="slot-content">
                    <div class="slot-team-icon">‚òÄÔ∏è</div>
                    <div class="slot-name">-</div>
                    <div class="slot-team">-</div>
                    <div class="slot-level">-</div>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <button class="control-btn start" onclick="startArenaDialog()">‚ñ∂Ô∏è Dialog starten</button>
            <button class="control-btn back" onclick="showScreen('setupScreen')">‚¨ÖÔ∏è Zur√ºck</button>
            <button class="control-btn back" onclick="showScreen('indexScreen')">üè† Start</button>
        </div>
    </div>

    <!-- DUELL GAME SCREEN -->
    <div class="screen" id="duellGameScreen">
        <div class="breadcrumb">
            <span class="breadcrumb-item">üè† Start</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item">‚öîÔ∏è Duell Setup</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item active">üéÆ Duell l√§uft</span>
        </div>

        <h1 class="game-title">‚öîÔ∏è Duell</h1>
        
        <div class="info-hint">
            <span class="info-hint-icon">üí¨</span>
            Klicke auf den üí¨ Button rechts unten f√ºr Formulierungshilfen!
        </div>
        
        <div class="mode-selection">
            <button class="mode-btn situation" onclick="selectDuellMode('situation')">
                üé≠ Klassischer Dialog
            </button>
            <button class="mode-btn mystery" onclick="selectDuellMode('mystery')">
                üéÅ W√∂rter-Challenge
            </button>
        </div>
        
        <div class="situation-display">
            <div class="situation-box">
                <h3 id="duellSituationTitle">Eure Situation</h3>
                <p id="duellSituationText">Aufgabe wird angezeigt...</p>
                <div id="duellMysteryWords" class="mystery-words"></div>
            </div>
        </div>

        <div class="roulette-container">
            <div class="roulette-slot">
                <div class="slot-content">
                    <div class="slot-team-icon">üë§</div>
                    <div class="slot-name" id="duellP1Name">Spieler 1</div>
                </div>
            </div>
            
            <div class="vs-symbol">VS</div>
            
            <div class="roulette-slot">
                <div class="slot-content">
                    <div class="slot-team-icon">üë§</div>
                    <div class="slot-name" id="duellP2Name">Spieler 2</div>
                </div>
            </div>
        </div>

        <div class="timer-display" id="duellTimer">0:00</div>

        <div class="control-panel">
            <button class="control-btn start" onclick="startDuellTimer()">‚è±Ô∏è Timer starten</button>
            <button class="control-btn start" onclick="stopDuellTimer()">‚è∏Ô∏è Timer stoppen</button>
            <button class="control-btn start" onclick="newDuellSituation()">üîÑ Neue Situation</button>
            <button class="control-btn back" onclick="showScreen('duellSetupScreen')">‚¨ÖÔ∏è Setup</button>
            <button class="control-btn back" onclick="showScreen('indexScreen')">üè† Start</button>
        </div>
    </div>

    <!-- √úBUNGSCAMP SCREEN -->
    <div class="screen" id="uebungscampScreen">
        <div class="breadcrumb">
            <span class="breadcrumb-item">üè† Start</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item active">üí™ √úbungscamp</span>
        </div>

        <h1 class="game-title">üí™ √úbungscamp</h1>
        
        <div class="info-hint">
            <span class="info-hint-icon">üí°</span>
            W√§hle eine √úbungsart: Sprechtraining mit Situationen oder interaktive Grammatik- und Wortschatz√ºbungen!
        </div>

        <div class="mode-selection" style="margin-bottom: 20px;">
            <button class="mode-btn" onclick="selectUebungMode(event, 'sprechen')" style="opacity: 1;">
                üó£Ô∏è Sprechtraining
            </button>
            <button class="mode-btn" onclick="selectUebungMode(event, 'interaktiv')">
                üéØ Interaktive √úbungen
            </button>
        </div>

        <!-- SPRECHTRAINING SECTION -->
        <div id="sprechtrainingSection">
            <div class="level-selection">
                <button class="level-roulette-btn rubin" onclick="selectUebungLevel('rubin')">
                    üî¥ Rubin
                </button>
                <button class="level-roulette-btn smaragd" onclick="selectUebungLevel('smaragd')">
                    üü¢ Smaragd
                </button>
                <button class="level-roulette-btn amethyst" onclick="selectUebungLevel('amethyst')">
                    üü£ Amethyst
                </button>
            </div>
            
            <div class="situation-display">
                <div class="situation-box">
                    <h3 id="uebungSituationTitle">Deine √úbungssituation</h3>
                    <p id="uebungSituationText">W√§hle ein Level!</p>
                    <div id="uebungMysteryWords" class="mystery-words"></div>
                </div>
            </div>

            <div class="timer-display" id="uebungTimer">0:00</div>

            <div class="control-panel">
                <button class="control-btn start" onclick="startUebungTimer()">‚è±Ô∏è Timer starten</button>
                <button class="control-btn start" onclick="stopUebungTimer()">‚è∏Ô∏è Timer stoppen</button>
                <button class="control-btn start" onclick="newUebungSituation()">üîÑ Neue Situation</button>
                <button class="control-btn back" onclick="showScreen('indexScreen')">üè† Zum Start</button>
            </div>
        </div>

        <!-- INTERAKTIVE √úBUNGEN SECTION -->
        <div id="interaktiveSection" style="display: none;">
            <div class="exercise-selection">
                <div class="exercise-card" onclick="startExercise('formulierung')">
                    <div class="exercise-icon">üí¨</div>
                    <h3>Formulierungen</h3>
                    <p>W√§hle die passende Formulierung f√ºr verschiedene Situationen (20 Aufgaben)</p>
                </div>
                <div class="exercise-card" onclick="startExercise('zuordnung')">
                    <div class="exercise-icon">üîó</div>
                    <h3>Zuordnung</h3>
                    <p>Ordne Redemittel, Situationen und Ausdr√ºcke richtig zu (15 Aufgaben)</p>
                </div>
                <div class="exercise-card" onclick="startExercise('sprachhandlung')">
                    <div class="exercise-icon">üé≠</div>
                    <h3>Was sagt die Person?</h3>
                    <p>Entschuldigung, Erkl√§rung, Beschwerde oder Vorschlag? (25 Aufgaben)</p>
                </div>
                <div class="exercise-card" onclick="startExercise('situation')">
                    <div class="exercise-icon">üé¨</div>
                    <h3>Situationen</h3>
                    <p>Was passt am besten zur Situation? (30 Aufgaben)</p>
                </div>
            </div>

            <div class="control-panel">
                <button class="control-btn back" onclick="showScreen('indexScreen')">üè† Zum Start</button>
            </div>
        </div>
    </div>

    <!-- EXERCISE SCREEN -->
    <div class="screen" id="exerciseScreen">
        <div class="breadcrumb">
            <span class="breadcrumb-item">üè† Start</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item">üí™ √úbungscamp</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item active" id="exerciseBreadcrumb">√úbung</span>
        </div>

        <div class="exercise-header">
            <h1 id="exerciseTitle">√úbung</h1>
            <div class="exercise-progress">
                <span id="exerciseCounter">Aufgabe 1 von 10</span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span id="exerciseScore">Punkte: 0</span>
            </div>
        </div>

        <div class="exercise-container" id="exerciseContainer">
            <!-- Exercise content will be dynamically inserted here -->
        </div>

        <div class="control-panel">
            <button class="control-btn start" id="checkAnswerBtn" onclick="checkAnswer()">‚úì Pr√ºfen</button>
            <button class="control-btn start" id="nextExerciseBtn" onclick="nextExercise()" style="display: none;">‚Üí Weiter</button>
            <button class="control-btn back" onclick="backToUebungscamp()">‚¨ÖÔ∏è Zur√ºck</button>
            <button class="control-btn back" onclick="showScreen('indexScreen')">üè† Start</button>
        </div>
    </div>

    <!-- FORMULIERUNGSHILFEN - FLOATING BUTTON -->
    <div class="help-float-button" id="helpFloatButton" onclick="openHelpModal()">
        üí¨
    </div>

    <!-- FORMULIERUNGSHILFEN - MODAL -->
    <div class="help-modal" id="helpModal" onclick="closeHelpModal(event)">
        <div class="help-modal-content" onclick="event.stopPropagation()">
            <div class="help-modal-header">
                <div class="help-modal-title">üí¨ Formulierungshilfen</div>
                <div class="help-modal-close" onclick="closeHelpModal()">√ó</div>
            </div>
            <div class="help-modal-body">
                <div class="category-buttons">
                    <button class="category-btn" onclick="showCategory('meinung')">üó£Ô∏è Meinung √§u√üern</button>
                    <button class="category-btn" onclick="showCategory('zustimmen')">‚úÖ Zustimmen</button>
                    <button class="category-btn" onclick="showCategory('widersprechen')">‚ùå Widersprechen</button>
                    <button class="category-btn" onclick="showCategory('vorschlag')">üí° Vorschlag machen</button>
                    <button class="category-btn" onclick="showCategory('beschwerde')">üò§ Beschwerde</button>
                    <button class="category-btn" onclick="showCategory('nachfragen')">‚ùì Nachfragen</button>
                    <button class="category-btn" onclick="showCategory('unsicherheit')">ü§î Unsicherheit</button>
                    <button class="category-btn" onclick="showCategory('kompromiss')">ü§ù Kompromiss</button>
                </div>

                <div class="phrases-container" id="phrases-meinung">
                    <div class="phrases-title">üó£Ô∏è Meinung √§u√üern</div>
                    <div class="phrases-grid">
                        <div class="help-phrase">Ich denke, dass...</div>
                        <div class="help-phrase">Meiner Meinung nach...</div>
                        <div class="help-phrase">Ich finde, dass...</div>
                        <div class="help-phrase">Ich glaube, dass...</div>
                        <div class="help-phrase">F√ºr mich ist wichtig, dass...</div>
                    </div>
                </div>

                <div class="phrases-container" id="phrases-zustimmen">
                    <div class="phrases-title">‚úÖ Zustimmen</div>
                    <div class="phrases-grid">
                        <div class="help-phrase">Da stimme ich zu.</div>
                        <div class="help-phrase">Gute Idee!</div>
                        <div class="help-phrase">Das sehe ich auch so.</div>
                        <div class="help-phrase">Genau! / Richtig!</div>
                        <div class="help-phrase">Da hast du recht.</div>
                        <div class="help-phrase">Einverstanden.</div>
                    </div>
                </div>

                <div class="phrases-container" id="phrases-widersprechen">
                    <div class="phrases-title">‚ùå Widersprechen</div>
                    <div class="phrases-grid">
                        <div class="help-phrase">Da bin ich anderer Meinung.</div>
                        <div class="help-phrase">Das sehe ich anders.</div>
                        <div class="help-phrase">Ich bin nicht einverstanden.</div>
                        <div class="help-phrase">Das finde ich nicht gut.</div>
                        <div class="help-phrase">Das stimmt nicht ganz.</div>
                        <div class="help-phrase">Ich denke das Gegenteil.</div>
                    </div>
                </div>

                <div class="phrases-container" id="phrases-vorschlag">
                    <div class="phrases-title">üí° Vorschlag machen</div>
                    <div class="phrases-grid">
                        <div class="help-phrase">Ich schlage vor, dass...</div>
                        <div class="help-phrase">Wir k√∂nnten...</div>
                        <div class="help-phrase">Wie w√§re es, wenn...</div>
                        <div class="help-phrase">Was h√§ltst du davon, wenn...</div>
                        <div class="help-phrase">Vielleicht sollten wir...</div>
                        <div class="help-phrase">Lass uns doch...</div>
                    </div>
                </div>

                <div class="phrases-container" id="phrases-beschwerde">
                    <div class="phrases-title">üò§ Beschwerde √§u√üern</div>
                    <div class="phrases-grid">
                        <div class="help-phrase">Es gibt ein Problem mit...</div>
                        <div class="help-phrase">Ich bin nicht zufrieden mit...</div>
                        <div class="help-phrase">Das gef√§llt mir nicht.</div>
                        <div class="help-phrase">Ich m√∂chte mich beschweren √ºber...</div>
                        <div class="help-phrase">Das kann so nicht bleiben.</div>
                        <div class="help-phrase">Das ist nicht in Ordnung.</div>
                    </div>
                </div>

                <div class="phrases-container" id="phrases-nachfragen">
                    <div class="phrases-title">‚ùì Nachfragen</div>
                    <div class="phrases-grid">
                        <div class="help-phrase">K√∂nnten Sie das erkl√§ren?</div>
                        <div class="help-phrase">Was meinen Sie damit?</div>
                        <div class="help-phrase">Verstehe ich das richtig?</div>
                        <div class="help-phrase">K√∂nnen Sie das wiederholen?</div>
                        <div class="help-phrase">Wie funktioniert das genau?</div>
                        <div class="help-phrase">Was bedeutet das?</div>
                    </div>
                </div>

                <div class="phrases-container" id="phrases-unsicherheit">
                    <div class="phrases-title">ü§î Unsicherheit ausdr√ºcken</div>
                    <div class="phrases-grid">
                        <div class="help-phrase">Ich bin mir nicht sicher...</div>
                        <div class="help-phrase">Vielleicht...</div>
                        <div class="help-phrase">M√∂glicherweise...</div>
                        <div class="help-phrase">Ich wei√ü nicht genau...</div>
                        <div class="help-phrase">Das k√∂nnte sein...</div>
                        <div class="help-phrase">Ich √ºberlege noch...</div>
                    </div>
                </div>

                <div class="phrases-container" id="phrases-kompromiss">
                    <div class="phrases-title">ü§ù Kompromiss finden</div>
                    <div class="phrases-grid">
                        <div class="help-phrase">K√∂nnen wir uns in der Mitte treffen?</div>
                        <div class="help-phrase">Was ist, wenn wir beide...?</div>
                        <div class="help-phrase">Lass uns einen Kompromiss finden.</div>
                        <div class="help-phrase">Wir k√∂nnten es so machen...</div>
                        <div class="help-phrase">Dann machen wir das so...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const teams = {
            mond: { name: 'Mond', icon: 'üåô', participants: [] },
            sonne: { name: 'Sonne', icon: '‚òÄÔ∏è', participants: [] },
            stern: { name: 'Stern', icon: '‚≠ê', participants: [] },
            ozean: { name: 'Ozean', icon: 'üåä', participants: [] }
        };

        const levelIcons = {
            rubin: 'üî¥',
            smaragd: 'üü¢',
            amethyst: 'üü£'
        };

        const levelNames = {
            rubin: 'Rubin',
            smaragd: 'Smaragd',
            amethyst: 'Amethyst'
        };

        const modeNames = {
            situation: 'üé≠ Klassischer Dialog',
            mystery: 'üéÅ W√∂rter-Challenge',
            schnellfeuer: '‚ö° Schnellfeuer',
            eskalation: 'üî• Eskalation'
        };

        let currentPlayer1 = null;
        let currentPlayer2 = null;
        let currentSituation = null;
        let currentMode = 'situation';
        let currentMysteryWords = [];
        let timerInterval = null;
        let duellLevel = null;
        let duellMode = 'situation';
        let uebungLevel = null;
        let timerRunning = false;

        // Navigation functions
        function goToArenaSetup() {
            showScreen('setupScreen');
        }

        function goToDuellSetup() {
            showScreen('duellSetupScreen');
        }

        function goToUebungscamp() {
            showScreen('uebungscampScreen');
            showHelpButton();
        }

        // Help Modal functions
        function openHelpModal() {
            document.getElementById('helpModal').classList.add('active');
        }

        function closeHelpModal(event) {
            // Schlie√üe nur wenn auf Hintergrund geklickt oder X-Button
            if (!event || event.target.id === 'helpModal' || event.target.classList.contains('help-modal-close')) {
                document.getElementById('helpModal').classList.remove('active');
            }
        }

        function showHelpButton() {
            document.getElementById('helpFloatButton').classList.add('visible');
        }

        function hideHelpButton() {
            document.getElementById('helpFloatButton').classList.remove('visible');
        }

        function showCategory(category) {
            // Alle Phrasen-Container ausblenden
            document.querySelectorAll('.phrases-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Alle Kategorie-Buttons deaktivieren
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Ausgew√§hlte Kategorie anzeigen
            const container = document.getElementById('phrases-' + category);
            if (container) {
                container.classList.add('active');
            }
            
            // Aktiven Button markieren
            event.target.classList.add('active');
        }

        window.onload = function() {
            ['mond', 'sonne', 'stern', 'ozean'].forEach(team => {
                for (let i = 0; i < 6; i++) {
                    addParticipantInput(team);
                }
            });
        };

        function addParticipantInput(team) {
            const container = document.getElementById('participants-' + team);
            const row = document.createElement('div');
            row.className = 'participant-row';
            
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'participant-input';
            input.placeholder = 'Name eingeben...';
            input.dataset.level = '';
            
            const levelButtons = document.createElement('div');
            levelButtons.className = 'level-buttons';
            
            ['rubin', 'smaragd', 'amethyst'].forEach(level => {
                const btn = document.createElement('button');
                btn.className = 'level-btn ' + level;
                btn.textContent = levelIcons[level];
                btn.onclick = function() {
                    row.querySelectorAll('.level-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    input.dataset.level = level;
                };
                levelButtons.appendChild(btn);
            });
            
            row.appendChild(input);
            row.appendChild(levelButtons);
            container.appendChild(row);
        }

        function updateParticipants(team) {
            const container = document.getElementById('participants-' + team);
            const rows = container.querySelectorAll('.participant-row');
            teams[team].participants = [];
            
            rows.forEach(function(row) {
                const input = row.querySelector('.participant-input');
                const name = input.value.trim();
                const level = input.dataset.level;
                
                if (name && level) {
                    teams[team].participants.push({
                        name: name,
                        level: level,
                        points: 0
                    });
                }
            });
        }

        function selectMode(mode) {
            currentMode = mode;
            document.querySelectorAll('#rouletteScreen .mode-btn').forEach(function(btn) {
                btn.style.opacity = '0.5';
            });
            event.target.style.opacity = '1';
        }

        function extractWordsFromSituation(situation) {
            const cleanSituation = situation.replace(/Situation:\s*/g, '').replace(/Sprecht √ºber:\s*/g, '');
            const words = cleanSituation.match(/\b[A-Z√Ñ√ñ√ú][a-z√§√∂√º√ü]+(?:-[A-Z√Ñ√ñ√ú][a-z√§√∂√º√ü]+)?\b/g) || [];
            const relevantWords = words.filter(w => 
                w.length > 4 && 
                !['Welche', 'Welcher', 'Welches', 'Wohin', 'Warum', 'Einer'].includes(w)
            );
            const result = [...new Set(relevantWords)].slice(0, 3);
            while (result.length < 3) {
                result.push(['Dialog', 'Gespr√§ch', 'Situation', 'Frage', 'Antwort'][result.length]);
            }
            return result;
        }

        function startRouletteByLevel(level) {
            ['mond', 'sonne', 'stern', 'ozean'].forEach(updateParticipants);

            const levelParticipants = [];
            Object.keys(teams).forEach(function(teamKey) {
                teams[teamKey].participants.forEach(function(participant) {
                    if (participant.level === level) {
                        levelParticipants.push({
                            name: participant.name,
                            team: teamKey,
                            teamName: teams[teamKey].name,
                            teamIcon: teams[teamKey].icon,
                            level: level
                        });
                    }
                });
            });

            if (levelParticipants.length < 2) {
                alert('Bitte mindestens 2 Teilnehmer im ' + levelNames[level] + '-Level!');
                return;
            }

            const slot1 = document.getElementById('slot1');
            const slot2 = document.getElementById('slot2');
            slot1.classList.add('spinning');
            slot2.classList.add('spinning');

            setTimeout(function() {
                slot1.classList.remove('spinning');
                slot2.classList.remove('spinning');

                const shuffled = levelParticipants.sort(function() { return 0.5 - Math.random(); });
                
                let player1Index = 0;
                let player2Index = 1;
                
                for (let i = 0; i < shuffled.length; i++) {
                    for (let j = i + 1; j < shuffled.length; j++) {
                        if (shuffled[i].team !== shuffled[j].team) {
                            player1Index = i;
                            player2Index = j;
                            i = shuffled.length;
                            break;
                        }
                    }
                }
                
                currentPlayer1 = shuffled[player1Index];
                currentPlayer2 = shuffled[player2Index];
                
                if (currentPlayer1.team === currentPlayer2.team) {
                    alert('‚ö†Ô∏è Hinweis: Beide Spieler sind aus Team ' + currentPlayer1.teamName + '!');
                }

                const levelSituations = situations[level];
                currentSituation = levelSituations[Math.floor(Math.random() * levelSituations.length)];

                displayPlayer(1, currentPlayer1);
                displayPlayer(2, currentPlayer2);

                if (currentMode === 'mystery') {
                    currentMysteryWords = extractWordsFromSituation(currentSituation);
                    document.getElementById('situationTitle').textContent = 'üéÅ W√∂rter-Challenge';
                    document.getElementById('situationText').textContent = currentSituation + '\n\n‚û°Ô∏è Benutzt dabei diese 3 W√∂rter:';
                    const wordsHTML = currentMysteryWords.map(function(w) {
                        return '<div class="mystery-word">' + w + '</div>';
                    }).join('');
                    document.getElementById('mysteryWords').innerHTML = wordsHTML;
                } else {
                    document.getElementById('situationTitle').textContent = modeNames[currentMode];
                    document.getElementById('situationText').textContent = currentSituation;
                    document.getElementById('mysteryWords').innerHTML = '';
                }
            }, 2000);
        }

        function displayPlayer(slot, player) {
            const slotEl = document.getElementById('slot' + slot);
            slotEl.querySelector('.slot-team-icon').textContent = player.teamIcon;
            slotEl.querySelector('.slot-name').textContent = player.name;
            slotEl.querySelector('.slot-team').textContent = 'Team ' + player.teamName;
            slotEl.querySelector('.slot-level').textContent = levelIcons[player.level];
        }

        function startArena() {
            let hasParticipants = false;
            Object.keys(teams).forEach(function(teamKey) {
                updateParticipants(teamKey);
                if (teams[teamKey].participants.length > 0) hasParticipants = true;
            });

            if (!hasParticipants) {
                alert('Bitte mindestens einen Teilnehmer eintragen!');
                return;
            }

            showScreen('rouletteScreen');
        }

        function startArenaDialog() {
            if (!currentPlayer1 || !currentPlayer2) {
                alert('Bitte zuerst Roulette drehen!');
                return;
            }
            alert('Dialog gestartet! (Arena-Dialog-Screen kann bei Bedarf hinzugef√ºgt werden)');
        }

        // DUELL FUNCTIONS
        function selectDuellLevel(level) {
            duellLevel = level;
            document.querySelectorAll('.level-select-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function startDuell() {
            const p1 = document.getElementById('duellPlayer1').value.trim();
            const p2 = document.getElementById('duellPlayer2').value.trim();
            
            if (!p1 || !p2) {
                alert('Bitte beide Spielernamen eingeben!');
                return;
            }
            
            if (!duellLevel) {
                alert('Bitte ein Level w√§hlen!');
                return;
            }
            
            document.getElementById('duellP1Name').textContent = p1;
            document.getElementById('duellP2Name').textContent = p2;
            
            showScreen('duellGameScreen');
            showHelpButton();
            newDuellSituation();
        }

        function selectDuellMode(mode) {
            duellMode = mode;
            document.querySelectorAll('#duellGameScreen .mode-btn').forEach(btn => btn.style.opacity = '0.5');
            event.target.style.opacity = '1';
            newDuellSituation();
        }

        function newDuellSituation() {
            const levelSituations = situations[duellLevel];
            currentSituation = levelSituations[Math.floor(Math.random() * levelSituations.length)];
            
            if (duellMode === 'mystery') {
                currentMysteryWords = extractWordsFromSituation(currentSituation);
                document.getElementById('duellSituationTitle').textContent = 'üéÅ W√∂rter-Challenge';
                document.getElementById('duellSituationText').textContent = currentSituation + '\n\n‚û°Ô∏è Benutzt dabei diese 3 W√∂rter:';
                const wordsHTML = currentMysteryWords.map(w => '<div class="mystery-word">' + w + '</div>').join('');
                document.getElementById('duellMysteryWords').innerHTML = wordsHTML;
            } else {
                document.getElementById('duellSituationTitle').textContent = 'üé≠ Eure Situation';
                document.getElementById('duellSituationText').textContent = currentSituation;
                document.getElementById('duellMysteryWords').innerHTML = '';
            }
            
            stopDuellTimer();
            document.getElementById('duellTimer').textContent = '0:00';
        }

        let duellTimerInterval = null;
        let duellStartTime = 0;

        function startDuellTimer() {
            if (timerRunning) return;
            clearInterval(duellTimerInterval);
            duellStartTime = Date.now();
            timerRunning = true;
            
            duellTimerInterval = setInterval(function() {
                const elapsed = Math.floor((Date.now() - duellStartTime) / 1000);
                const mins = Math.floor(elapsed / 60);
                const secs = elapsed % 60;
                document.getElementById('duellTimer').textContent = mins + ':' + (secs < 10 ? '0' : '') + secs;
            }, 1000);
        }

        function stopDuellTimer() {
            clearInterval(duellTimerInterval);
            timerRunning = false;
        }

        // √úBUNGSCAMP FUNCTIONS
        // √úBUNGSCAMP FUNCTIONS
        function selectUebungMode(evt, mode) {
            uebungMode = mode;
            document.querySelectorAll('#uebungscampScreen .mode-btn').forEach(function(btn) {
                btn.style.opacity = '0.5';
            });
            evt.target.style.opacity = '1';
            
            if (mode === 'sprechen') {
                document.getElementById('sprechtrainingSection').style.display = 'block';
                document.getElementById('interaktiveSection').style.display = 'none';
                hideHelpButton();
            } else {
                document.getElementById('sprechtrainingSection').style.display = 'none';
                document.getElementById('interaktiveSection').style.display = 'block';
                hideHelpButton();
            }
        }

        function selectUebungLevel(level) {
            uebungLevel = level;
            newUebungSituation();
        }

        function newUebungSituation() {
            if (!uebungLevel) return;
            
            // Timer stoppen und zur√ºcksetzen
            stopUebungTimer();
            document.getElementById('uebungTimer').textContent = '0:00';
            
            const levelSituations = situations[uebungLevel];
            currentSituation = levelSituations[Math.floor(Math.random() * levelSituations.length)];
            currentMysteryWords = extractWordsFromSituation(currentSituation);
            
            document.getElementById('uebungSituationTitle').textContent = 'üí™ Deine √úbungssituation';
            document.getElementById('uebungSituationText').textContent = currentSituation + '\n\n‚û°Ô∏è Relevante W√∂rter:';
            
            const wordsHTML = currentMysteryWords.map(w => '<div class="mystery-word">' + w + '</div>').join('');
            document.getElementById('uebungMysteryWords').innerHTML = wordsHTML;
        }

        let uebungTimerInterval = null;
        let uebungStartTime = 0;
        let uebungTimerRunning = false;

        function startUebungTimer() {
            if (uebungTimerRunning) return;
            
            clearInterval(uebungTimerInterval);
            uebungStartTime = Date.now();
            uebungTimerRunning = true;
            
            uebungTimerInterval = setInterval(function() {
                const elapsed = Math.floor((Date.now() - uebungStartTime) / 1000);
                const mins = Math.floor(elapsed / 60);
                const secs = elapsed % 60;
                document.getElementById('uebungTimer').textContent = mins + ':' + (secs < 10 ? '0' : '') + secs;
            }, 1000);
        }

        function stopUebungTimer() {
            clearInterval(uebungTimerInterval);
            uebungTimerRunning = false;
        }

        // INTERACTIVE EXERCISE FUNCTIONS
        function startExercise(type) {
            currentExerciseType = type;
            currentExerciseSet = shuffleArray([...exerciseData[type]]);
            currentExerciseIndex = 0;
            exerciseScore = 0;
            
            const titles = {
                formulierung: 'üí¨ Formulierungen',
                zuordnung: 'üîó Zuordnung',
                sprachhandlung: 'üé≠ Was sagt die Person?',
                situation: 'üé¨ Situationen'
            };
            
            document.getElementById('exerciseTitle').textContent = titles[type];
            document.getElementById('exerciseBreadcrumb').textContent = titles[type];
            
            showScreen('exerciseScreen');
            loadExercise();
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function loadExercise() {
            const exercise = currentExerciseSet[currentExerciseIndex];
            const container = document.getElementById('exerciseContainer');
            selectedAnswer = null;
            
            // Update progress
            document.getElementById('exerciseCounter').textContent = 
                'Aufgabe ' + (currentExerciseIndex + 1) + ' von ' + currentExerciseSet.length;
            document.getElementById('progressFill').style.width = 
                ((currentExerciseIndex / currentExerciseSet.length) * 100) + '%';
            document.getElementById('exerciseScore').textContent = 'Punkte: ' + exerciseScore;
            
            // Reset buttons
            document.getElementById('checkAnswerBtn').style.display = 'inline-block';
            document.getElementById('nextExerciseBtn').style.display = 'none';
            
            if (currentExerciseType === 'formulierung' || currentExerciseType === 'situation' || currentExerciseType === 'sprachhandlung') {
                container.innerHTML = '<div class="question-box">' +
                    '<div class="question-text">' + exercise.question + '</div>' +
                    '<div class="options-container">' +
                    exercise.options.map(function(opt, i) {
                        return '<button class="option-btn" onclick="selectOption(' + i + ')">' + opt + '</button>';
                    }).join('') +
                    '</div>' +
                    '<div class="feedback-box" id="feedbackBox">' +
                    '<div class="feedback-title" id="feedbackTitle"></div>' +
                    '<div class="feedback-text" id="feedbackText"></div>' +
                    '</div>' +
                    '</div>';
            } else if (currentExerciseType === 'zuordnung') {
                loadMatchingExercise(exercise);
            }
        }

        function selectOption(index) {
            if (selectedAnswer !== null && document.querySelectorAll('.option-btn')[0].disabled) return;
            
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(function(btn) { btn.classList.remove('selected'); });
            buttons[index].classList.add('selected');
            selectedAnswer = index;
        }

        function checkAnswer() {
            const exercise = currentExerciseSet[currentExerciseIndex];
            
            if (currentExerciseType === 'formulierung' || currentExerciseType === 'situation' || currentExerciseType === 'sprachhandlung') {
                if (selectedAnswer === null) {
                    alert('Bitte w√§hle eine Antwort!');
                    return;
                }
                
                const buttons = document.querySelectorAll('.option-btn');
                const feedbackBox = document.getElementById('feedbackBox');
                const feedbackTitle = document.getElementById('feedbackTitle');
                const feedbackText = document.getElementById('feedbackText');
                
                buttons.forEach(function(btn) { btn.disabled = true; });
                
                if (selectedAnswer === exercise.correct) {
                    buttons[selectedAnswer].classList.add('correct');
                    feedbackBox.classList.add('show', 'correct');
                    feedbackTitle.textContent = '‚úì Richtig!';
                    feedbackText.textContent = exercise.explanation;
                    exerciseScore += 10;
                } else {
                    buttons[selectedAnswer].classList.add('wrong');
                    buttons[exercise.correct].classList.add('correct');
                    feedbackBox.classList.add('show', 'wrong');
                    feedbackTitle.textContent = '‚úó Leider falsch';
                    feedbackText.textContent = exercise.explanation;
                }
            } else if (currentExerciseType === 'zuordnung') {
                checkMatchingAnswer();
            }
            
            document.getElementById('checkAnswerBtn').style.display = 'none';
            document.getElementById('nextExerciseBtn').style.display = 'inline-block';
            document.getElementById('exerciseScore').textContent = 'Punkte: ' + exerciseScore;
        }

        function checkMatchingAnswer() {
            const exercise = currentExerciseSet[currentExerciseIndex];
            const feedbackBox = document.getElementById('feedbackBox');
            const feedbackTitle = document.getElementById('feedbackTitle');
            const feedbackText = document.getElementById('feedbackText');
            
            // Check if all pairs are correct
            let allCorrect = true;
            if (matchedPairs.length !== exercise.correctPairs.length) {
                allCorrect = false;
            } else {
                for (let i = 0; i < matchedPairs.length; i++) {
                    const pair = matchedPairs[i];
                    const found = exercise.correctPairs.some(function(cp) {
                        return cp[0] === pair[0] && cp[1] === pair[1];
                    });
                    if (!found) {
                        allCorrect = false;
                        break;
                    }
                }
            }
            
            feedbackBox.classList.add('show');
            if (allCorrect) {
                feedbackBox.classList.add('correct');
                feedbackTitle.textContent = '‚úì Richtig!';
                feedbackText.textContent = exercise.explanation;
                exerciseScore += 10;
            } else {
                feedbackBox.classList.add('wrong');
                feedbackTitle.textContent = '‚úó Nicht ganz richtig';
                feedbackText.textContent = exercise.explanation;
            }
        }

        function nextExercise() {
            currentExerciseIndex++;
            if (currentExerciseIndex >= currentExerciseSet.length) {
                showExerciseResults();
            } else {
                loadExercise();
            }
        }

        function showExerciseResults() {
            const container = document.getElementById('exerciseContainer');
            const maxScore = currentExerciseSet.length * 10;
            const percentage = Math.round((exerciseScore / maxScore) * 100);
            
            let message = '';
            if (percentage >= 90) message = 'Ausgezeichnet! üåü';
            else if (percentage >= 70) message = 'Sehr gut! üëç';
            else if (percentage >= 50) message = 'Gut gemacht! ‚úì';
            else message = 'Weiter √ºben! üí™';
            
            container.innerHTML = '<div class="question-box" style="text-align: center; padding: 50px;">' +
                '<h2 style="font-size: 2.5em; margin-bottom: 20px;">' + message + '</h2>' +
                '<div style="font-size: 3em; margin: 30px 0;">' + exerciseScore + ' / ' + maxScore + '</div>' +
                '<div style="font-size: 1.5em; margin-bottom: 40px;">' + percentage + '% richtig</div>' +
                '<button class="btn btn-primary" onclick="startExercise(\'' + currentExerciseType + '\')" ' +
                'style="margin: 10px; padding: 15px 40px;">üîÑ Nochmal √ºben</button>' +
                '<button class="btn btn-secondary" onclick="backToUebungscamp()" ' +
                'style="margin: 10px; padding: 15px 40px;">üìö Andere √úbung</button>' +
                '</div>';
            
            document.getElementById('checkAnswerBtn').style.display = 'none';
            document.getElementById('nextExerciseBtn').style.display = 'none';
        }

        function backToUebungscamp() {
            showScreen('uebungscampScreen');
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => screen.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            
            // Hide help button on index, setup screens, roulette, and exercise
            if (screenId === 'indexScreen' || screenId === 'setupScreen' || screenId === 'duellSetupScreen' || 
                screenId === 'rouletteScreen' || screenId === 'exerciseScreen') {
                hideHelpButton();
                closeHelpModal();
            }
            
            // Show help button on Duell and √úbungscamp screens
            if (screenId === 'duellGameScreen' || screenId === 'uebungscampScreen') {
                showHelpButton();
            }
            
            // Stop all timers when going back to index
            if (screenId === 'indexScreen') {
                stopDuellTimer();
                stopUebungTimer();
            }
        }

        const situations = {
            rubin: [
                "Situation: Ihr geht zusammen in den Supermarkt einkaufen.\nSprecht √ºber: ‚Ä¢ Was braucht ihr? ‚Ä¢ Wo findet ihr die Sachen? ‚Ä¢ Wie viel kostet das?",
                "Situation: Ihr m√∂chtet zusammen kochen.\nSprecht √ºber: ‚Ä¢ Was kocht ihr? ‚Ä¢ Wer kauft was ein? ‚Ä¢ Wann fangt ihr an?",
                "Situation: Ihr geht zum B√§cker.\nSprecht √ºber: ‚Ä¢ Was m√∂chtet ihr kaufen? ‚Ä¢ Wie viel kostet das? ‚Ä¢ Nehmt ihr noch etwas mit?",
                "Situation: Einer von euch ist in der Apotheke.\nSprecht √ºber: ‚Ä¢ Was braucht ihr? ‚Ä¢ Wie viel nehmt ihr? ‚Ä¢ Was sagt der Apotheker?",
                "Situation: Ihr kauft zusammen Kleidung.\nSprecht √ºber: ‚Ä¢ Welche Gr√∂√üe? ‚Ä¢ Welche Farbe passt? ‚Ä¢ Wie viel kostet das?",
                "Situation: Ihr plant einen Ausflug in den Park.\nSprecht √ºber: ‚Ä¢ Wann geht ihr? ‚Ä¢ Was nehmt ihr mit? ‚Ä¢ Wie ist das Wetter?",
                "Situation: Ihr m√∂chtet zusammen in ein Caf√© gehen.\nSprecht √ºber: ‚Ä¢ Welches Caf√©? ‚Ä¢ Wann trefft ihr euch? ‚Ä¢ Was trinkt ihr?",
                "Situation: Ihr plant einen Filmabend zu Hause.\nSprecht √ºber: ‚Ä¢ Welchen Film schaut ihr? ‚Ä¢ Wer bringt was mit? ‚Ä¢ Wann beginnt ihr?",
                "Situation: Ihr wollt zusammen Sport machen.\nSprecht √ºber: ‚Ä¢ Welcher Sport? ‚Ä¢ Wann und wo? ‚Ä¢ Was braucht ihr?",
                "Situation: Ihr geht spazieren.\nSprecht √ºber: ‚Ä¢ Wohin geht ihr? ‚Ä¢ Wie lange? ‚Ä¢ Was m√∂chtet ihr sehen?",
                "Situation: Einer braucht einen Termin beim Arzt.\nSprecht √ºber: ‚Ä¢ Welcher Arzt? ‚Ä¢ Wann passt es? ‚Ä¢ Welche Uhrzeit?",
                "Situation: Ihr trefft euch am Bahnhof.\nSprecht √ºber: ‚Ä¢ Wann genau? ‚Ä¢ An welchem Gleis? ‚Ä¢ Wohin fahrt ihr?",
                "Situation: Ihr plant ein Picknick im Park.\nSprecht √ºber: ‚Ä¢ Was nehmt ihr mit? ‚Ä¢ Wann geht ihr? ‚Ä¢ Wie ist das Wetter?",
                "Situation: Ihr m√ºsst zur Post gehen.\nSprecht √ºber: ‚Ä¢ Was wollt ihr verschicken? ‚Ä¢ Wie? ‚Ä¢ Was kostet das?",
                "Situation: Ihr r√§umt zusammen die Wohnung auf.\nSprecht √ºber: ‚Ä¢ Wer macht was? ‚Ä¢ Wo beginnt ihr? ‚Ä¢ Wie lange dauert das?",
                "Situation: Ihr geht zum Baumarkt.\nSprecht √ºber: ‚Ä¢ Was braucht ihr? ‚Ä¢ F√ºr welches Zimmer? ‚Ä¢ Wie viel kostet das?",
                "Situation: Ihr plant einen Umzug.\nSprecht √ºber: ‚Ä¢ Wann zieht ihr um? ‚Ä¢ Wer hilft euch? ‚Ä¢ Was packt ihr zuerst?",
                "Situation: Ihr fahrt zusammen mit dem Bus.\nSprecht √ºber: ‚Ä¢ Wohin fahrt ihr? ‚Ä¢ Welche Linie? ‚Ä¢ Wann kommt der Bus?",
                "Situation: Ihr sucht zusammen den Weg zum Rathaus.\nSprecht √ºber: ‚Ä¢ Wo ist das Rathaus? ‚Ä¢ Wie kommt ihr hin? ‚Ä¢ Mit Bus oder zu Fu√ü?",
                "Situation: Ihr holt jemanden vom Bahnhof ab.\nSprecht √ºber: ‚Ä¢ Wann kommt der Zug? ‚Ä¢ Welches Gleis? ‚Ä¢ Wie fahrt ihr hin?",
                "Situation: Einer von euch geht zum Arzt.\nSprecht √ºber: ‚Ä¢ Was tut weh? ‚Ä¢ Seit wann? ‚Ä¢ Welche Medizin hilft?",
                "Situation: Ihr seid beide krank.\nSprecht √ºber: ‚Ä¢ Was fehlt euch? ‚Ä¢ Welche Medizin nehmt ihr? ‚Ä¢ Wann geht es besser?",
                "Situation: Ihr sucht zusammen einen Job.\nSprecht √ºber: ‚Ä¢ Welchen Job? ‚Ä¢ Wo sucht ihr? ‚Ä¢ Vollzeit oder Teilzeit?",
                "Situation: Ihr macht einen Sprachkurs.\nSprecht √ºber: ‚Ä¢ Wann ist der Kurs? ‚Ä¢ Wo? ‚Ä¢ Welches Level habt ihr?",
                "Situation: Eure Kinder gehen in die Schule.\nSprecht √ºber: ‚Ä¢ Wo ist die Schule? ‚Ä¢ Wann beginnt sie? ‚Ä¢ Was brauchen die Kinder?"
            ],
            smaragd: [
                "Situation: Die Waschmaschine in der Wohnung ist kaputt.\nSprecht √ºber: ‚Ä¢ Seit wann ist sie kaputt? ‚Ä¢ Ruft ihr den Vermieter an? ‚Ä¢ Was sagt ihr?",
                "Situation: Im Restaurant ist das Essen kalt.\nSprecht √ºber: ‚Ä¢ Was macht ihr? ‚Ä¢ Wie beschwert ihr euch h√∂flich? ‚Ä¢ Was m√∂chtet ihr?",
                "Situation: Die gekaufte Hose ist zu klein.\nSprecht √ºber: ‚Ä¢ Geht ihr zur√ºck zum Gesch√§ft? ‚Ä¢ Habt ihr den Kassenbon? ‚Ä¢ Umtausch oder Geld zur√ºck?",
                "Situation: Der Nachbar ist oft zu laut.\nSprecht √ºber: ‚Ä¢ Wann ist es laut? ‚Ä¢ Sprecht ihr mit ihm? ‚Ä¢ Was sagt ihr?",
                "Situation: Das bestellte Paket ist nicht angekommen.\nSprecht √ºber: ‚Ä¢ Wen ruft ihr an? ‚Ä¢ Was fragt ihr? ‚Ä¢ Wie l√∂st ihr das?",
                "Situation: Ihr meldet euch im Einwohnermeldeamt an.\nSprecht √ºber: ‚Ä¢ Was braucht ihr? ‚Ä¢ Welche Papiere m√ºsst ihr mitbringen? ‚Ä¢ Wann geht ihr hin?",
                "Situation: Ihr beantragt einen Kinderreisepass.\nSprecht √ºber: ‚Ä¢ Wo macht ihr das? ‚Ä¢ Was m√ºsst ihr mitbringen? ‚Ä¢ Wie viel kostet das?",
                "Situation: Ihr sucht die Ausl√§nderbeh√∂rde.\nSprecht √ºber: ‚Ä¢ Wo ist die Beh√∂rde? ‚Ä¢ Wie macht ihr einen Termin? ‚Ä¢ Was braucht ihr?",
                "Situation: Ihr braucht eine Geburtsurkunde.\nSprecht √ºber: ‚Ä¢ Wo bekommt ihr die? ‚Ä¢ Welches Amt? ‚Ä¢ Was kostet das?",
                "Situation: Ihr sucht zusammen eine Wohnung.\nSprecht √ºber: ‚Ä¢ Wie viele Zimmer braucht ihr? ‚Ä¢ Wie viel Miete k√∂nnt ihr zahlen? ‚Ä¢ In welchem Stadtteil?",
                "Situation: Ihr besichtigt heute eine Wohnung.\nSprecht √ºber: ‚Ä¢ Was fragt ihr den Vermieter? ‚Ä¢ Was ist euch wichtig? ‚Ä¢ Wann k√∂nnt ihr einziehen?",
                "Situation: Ihr unterschreibt einen Mietvertrag.\nSprecht √ºber: ‚Ä¢ Was steht im Vertrag? ‚Ä¢ Was bedeutet Kaution? ‚Ä¢ Wann beginnt die Miete?",
                "Situation: Es gibt Schimmel in eurer Wohnung.\nSprecht √ºber: ‚Ä¢ Seit wann ist der Schimmel da? ‚Ä¢ Ruft ihr den Vermieter an? ‚Ä¢ Was sagt ihr?",
                "Situation: Ihr lest zusammen eine Stellenanzeige.\nSprecht √ºber: ‚Ä¢ Passt der Job zu euch? ‚Ä¢ Was sind die Anforderungen? ‚Ä¢ Bewerbt ihr euch?",
                "Situation: Ihr schreibt eine Bewerbung.\nSprecht √ºber: ‚Ä¢ Was schreibt ihr? ‚Ä¢ Welche Dokumente braucht ihr? ‚Ä¢ Wann schickt ihr sie ab?",
                "Situation: Ihr habt morgen ein Vorstellungsgespr√§ch.\nSprecht √ºber: ‚Ä¢ Was zieht ihr an? ‚Ä¢ Was sagt ihr √ºber euch? ‚Ä¢ Welche Fragen stellt ihr?",
                "Situation: Euer Chef √§ndert den Arbeitsplan.\nSprecht √ºber: ‚Ä¢ Passt das f√ºr euch? ‚Ä¢ Habt ihr ein Problem damit? ‚Ä¢ Was macht ihr?",
                "Situation: Ihr braucht einen Termin beim Facharzt.\nSprecht √ºber: ‚Ä¢ Die Praxis ist voll. ‚Ä¢ Wie lange m√ºsst ihr warten? ‚Ä¢ Was macht ihr?",
                "Situation: Eure Krankenkassenkarte ist weg.\nSprecht √ºber: ‚Ä¢ Wo k√∂nnte sie sein? ‚Ä¢ Wen ruft ihr an? ‚Ä¢ Was sagt ihr?",
                "Situation: Ihr braucht ein Rezept vom Arzt.\nSprecht √ºber: ‚Ä¢ Warum braucht ihr es? ‚Ä¢ Wo holt ihr das Rezept ab? ‚Ä¢ Was holt ihr in der Apotheke?",
                "Situation: Euer Kind ist krank und kann nicht zur Schule.\nSprecht √ºber: ‚Ä¢ Was hat das Kind? ‚Ä¢ Ruft ihr in der Schule an? ‚Ä¢ Wann geht es wieder?",
                "Situation: Ihr er√∂ffnet ein Bankkonto.\nSprecht √ºber: ‚Ä¢ Welche Bank w√§hlt ihr? ‚Ä¢ Was braucht ihr daf√ºr? ‚Ä¢ Welches Konto ist gut?",
                "Situation: Eure EC-Karte funktioniert nicht.\nSprecht √ºber: ‚Ä¢ Was ist das Problem? ‚Ä¢ Wen ruft ihr an? ‚Ä¢ Was sagt ihr?",
                "Situation: Ihr √ºberweist Geld ins Ausland.\nSprecht √ºber: ‚Ä¢ Wie geht das? ‚Ä¢ Was braucht ihr? ‚Ä¢ Wie lange dauert das?",
                "Situation: Euer Auto ist kaputt.\nSprecht √ºber: ‚Ä¢ Was ist kaputt? ‚Ä¢ Ruft ihr die Werkstatt an? ‚Ä¢ Was sagt ihr am Telefon?",
                "Situation: Ihr bekommt einen Strafzettel f√ºrs Falschparken.\nSprecht √ºber: ‚Ä¢ Warum habt ihr den Strafzettel? ‚Ä¢ Wie bezahlt ihr ihn? ‚Ä¢ Bis wann?",
                "Situation: Ihr wollt ein Auto f√ºr den Urlaub mieten.\nSprecht √ºber: ‚Ä¢ F√ºr wie lange? ‚Ä¢ Welches Auto? ‚Ä¢ Was kostet das?",
                "Situation: Ihr sucht einen Kitaplatz f√ºr euer Kind.\nSprecht √ºber: ‚Ä¢ Wo gibt es Kitapl√§tze? ‚Ä¢ Ab wann? ‚Ä¢ Was m√ºsst ihr machen?",
                "Situation: Euer Kind hat Streit in der Schule.\nSprecht √ºber: ‚Ä¢ Was ist passiert? ‚Ä¢ Sprecht ihr mit dem Lehrer? ‚Ä¢ Was sagt ihr?",
                "Situation: Ihr plant einen Kindergeburtstag.\nSprecht √ºber: ‚Ä¢ Wo feiert ihr? ‚Ä¢ Wen ladet ihr ein? ‚Ä¢ Was spielt und esst ihr?"
            ],
            amethyst: [
                "Situation: Die Heizung ist kaputt. Es ist Winter. Der Vermieter reagiert nicht.\nSprecht √ºber: ‚Ä¢ Was macht ihr zuerst? ‚Ä¢ Wen ruft ihr noch an? ‚Ä¢ Wie l√∂st ihr das Problem?",
                "Situation: Eure Party wird zu laut. Die Nachbarn beschweren sich.\nSprecht √ºber: ‚Ä¢ Wie reagiert ihr diplomatisch? ‚Ä¢ Was sagt ihr den Nachbarn? ‚Ä¢ Wie l√∂st ihr das?",
                "Situation: Ihr habt verschiedene Meinungen √ºber das Essen f√ºr die Party.\nSprecht √ºber: ‚Ä¢ Was m√∂chte jeder? ‚Ä¢ Wie findet ihr einen Kompromiss? ‚Ä¢ Was macht ihr am Ende?",
                "Situation: Das Wetter ist schlecht f√ºr euren Ausflug.\nSprecht √ºber: ‚Ä¢ Was war geplant? ‚Ä¢ Welche Alternativen habt ihr? ‚Ä¢ Plant schnell um!",
                "Situation: Die Bank hat Geld vom Konto abgebucht.\nSprecht √ºber: ‚Ä¢ Warum ist das passiert? ‚Ä¢ Ruft ihr die Bank an? ‚Ä¢ Wie kl√§rt ihr das?",
                "Situation: Euer Chef versteht etwas falsch.\nSprecht √ºber: ‚Ä¢ Was versteht er falsch? ‚Ä¢ Wie erkl√§rt ihr es richtig? ‚Ä¢ Wie bleibt ihr h√∂flich?",
                "Situation: Im Gesch√§ft gibt es √Ñrger mit dem Umtausch.\nSprecht √ºber: ‚Ä¢ Was ist das Problem? ‚Ä¢ Was sind eure Rechte? ‚Ä¢ Wie l√∂st ihr das?",
                "Situation: Ihr habt einen falschen Strafzettel bekommen.\nSprecht √ºber: ‚Ä¢ Warum ist er falsch? ‚Ä¢ Wie argumentiert ihr? ‚Ä¢ An wen wendet ihr euch?",
                "Situation: Der Vermieter will die Miete erh√∂hen.\nSprecht √ºber: ‚Ä¢ Ist das legal? ‚Ä¢ Wie viel mehr? ‚Ä¢ Wie sprecht ihr mit dem Vermieter?",
                "Situation: Euer Arbeitgeber will euch k√ºndigen.\nSprecht √ºber: ‚Ä¢ Was ist der Grund? ‚Ä¢ Was sind eure Rechte? ‚Ä¢ Was k√∂nnt ihr tun?",
                "Situation: Ihr wollt mehr Gehalt vom Chef.\nSprecht √ºber: ‚Ä¢ Wie fragt ihr? ‚Ä¢ Wie begr√ºndet ihr das? ‚Ä¢ Was sagt ihr?",
                "Situation: Die Krankenkasse zahlt eine Behandlung nicht.\nSprecht √ºber: ‚Ä¢ Warum nicht? ‚Ä¢ Legt ihr Widerspruch ein? ‚Ä¢ Wie macht ihr das?",
                "Situation: Es gibt einen Unfall! Ihr ruft den Notarzt.\nSprecht √ºber: ‚Ä¢ Was ist passiert? ‚Ä¢ Welche Infos braucht der Notarzt? ‚Ä¢ Was sagt ihr am Telefon?",
                "Situation: Eure Wohnung ist √ºberflutet.\nSprecht √ºber: ‚Ä¢ Was ist passiert? ‚Ä¢ Wen ruft ihr an? ‚Ä¢ Was macht ihr zuerst?",
                "Situation: Euer Pass ist gestohlen.\nSprecht √ºber: ‚Ä¢ Wo geht ihr hin? ‚Ä¢ Was braucht ihr f√ºr einen neuen Pass? ‚Ä¢ Wie lange dauert das?",
                "Situation: Euer Kind ist in der Schule verletzt. Die Schule ruft an.\nSprecht √ºber: ‚Ä¢ Was ist passiert? ‚Ä¢ Fahrt ihr sofort hin? ‚Ä¢ Was fragt ihr?",
                "Situation: Ihr beantragt Wohngeld.\nSprecht √ºber: ‚Ä¢ Welche Formulare braucht ihr? ‚Ä¢ Was bedeuten die Fragen? ‚Ä¢ Wo gebt ihr das ab?",
                "Situation: Euer Aufenthaltstitel l√§uft bald ab.\nSprecht √ºber: ‚Ä¢ Was m√ºsst ihr tun? ‚Ä¢ Welche Unterlagen braucht ihr? ‚Ä¢ Wo m√ºsst ihr hin?",
                "Situation: Ihr wollt einen Integrationskurs beantragen.\nSprecht √ºber: ‚Ä¢ Wo macht ihr das? ‚Ä¢ Was braucht ihr? ‚Ä¢ Wie geht das?",
                "Situation: Ihr habt Mobbing am Arbeitsplatz erlebt.\nSprecht √ºber: ‚Ä¢ Was ist passiert? ‚Ä¢ An wen wendet ihr euch? ‚Ä¢ Wie k√∂nnt ihr das beweisen?",
                "Situation: Euer Arbeitsvertrag ist sehr kompliziert.\nSprecht √ºber: ‚Ä¢ Was bedeutet das Kleingedruckte? ‚Ä¢ Habt ihr Fragen? ‚Ä¢ Wen fragt ihr?",
                "Situation: Ihr plant Elternzeit zu nehmen.\nSprecht √ºber: ‚Ä¢ Wie beantragt ihr die? ‚Ä¢ Wie lange wollt ihr? ‚Ä¢ Was bedeutet das f√ºr die Arbeit?",
                "Situation: Deutsche Kollegen verstehen eure Kultur nicht.\nSprecht √ºber: ‚Ä¢ Was verstehen sie nicht? ‚Ä¢ Wie erkl√§rt ihr das? ‚Ä¢ Welche Beispiele gebt ihr?",
                "Situation: Es gibt Konflikte wegen verschiedener Feiertage.\nSprecht √ºber: ‚Ä¢ Was ist das Problem? ‚Ä¢ Wie erkl√§rt ihr eure Feiertage? ‚Ä¢ Wie l√∂st ihr das?",
                "Situation: Eure Kinder sind zwischen zwei Kulturen.\nSprecht √ºber: ‚Ä¢ Was ist schwierig f√ºr sie? ‚Ä¢ Wie unterst√ºtzt ihr sie? ‚Ä¢ Was macht ihr zu Hause?",
                "Situation: Ihr plant eine Reise mit kleinem Budget.\nSprecht √ºber: ‚Ä¢ Wohin wollt ihr? ‚Ä¢ Wie spart ihr Geld? ‚Ä¢ Was ist euch wichtig?",
                "Situation: Am Ende des Monats ist das Geld immer alle.\nSprecht √ºber: ‚Ä¢ Wof√ºr gebt ihr Geld aus? ‚Ä¢ Wie plant ihr besser? ‚Ä¢ Was k√∂nnt ihr sparen?",
                "Situation: Ihr wollt f√ºr etwas Gro√ües sparen.\nSprecht √ºber: ‚Ä¢ Wof√ºr spart ihr? ‚Ä¢ Wie viel braucht ihr? ‚Ä¢ Wie macht ihr das?"
            ]
        };

        // EXERCISE DATA - B1 NIVEAU
        let currentExerciseType = null;
        let currentExerciseSet = [];
        let currentExerciseIndex = 0;
        let exerciseScore = 0;
        let selectedAnswer = null;
        let uebungMode = 'sprechen';

        const exerciseData = {
            formulierung: [
                {
                    question: "Sie m√∂chten h√∂flich ablehnen, mit Kollegen nach der Arbeit essen zu gehen. Was sagen Sie?",
                    options: [
                        "Nein, ich habe keine Lust.",
                        "Das ist eine gute Idee, aber heute kann ich leider nicht.",
                        "Ich komme nicht mit.",
                        "Geht alleine!"
                    ],
                    correct: 1,
                    explanation: "Man lehnt h√∂flich ab und gibt einen Grund an."
                },
                {
                    question: "Ein Kollege macht einen Fehler. Wie sprechen Sie ihn h√∂flich darauf an?",
                    options: [
                        "Du hast schon wieder einen Fehler gemacht!",
                        "Ich glaube, da ist ein kleiner Fehler.",
                        "Das ist v√∂llig falsch!",
                        "Kannst du das nicht richtig machen?"
                    ],
                    correct: 1,
                    explanation: "Man sagt h√∂flich, dass ein Fehler da ist, ohne die Person anzugreifen."
                },
                {
                    question: "Sie m√∂chten im Gesch√§ft etwas umtauschen. Wie beginnen Sie?",
                    options: [
                        "Ich will das zur√ºckgeben!",
                        "Guten Tag, ich m√∂chte das gerne umtauschen.",
                        "Hier, nehmen Sie das zur√ºck!",
                        "Das gef√§llt mir nicht mehr."
                    ],
                    correct: 1,
                    explanation: "Man gr√º√üt h√∂flich und sagt klar, was man m√∂chte."
                },
                {
                    question: "Ihr Chef fragt nach Ihrer Meinung zum neuen Projekt. Was antworten Sie?",
                    options: [
                        "Keine Ahnung.",
                        "Ich finde das Projekt interessant, aber ich sehe auch ein paar Probleme.",
                        "Das ist total schlecht!",
                        "Geht so."
                    ],
                    correct: 1,
                    explanation: "Bei der Arbeit sagt man seine Meinung professionell."
                },
                {
                    question: "Sie m√ºssen einen Termin absagen. Wie sagen Sie das h√∂flich?",
                    options: [
                        "Ich komme nicht.",
                        "Ich muss den Termin leider absagen. K√∂nnen wir einen neuen Termin machen?",
                        "Ich habe keine Zeit mehr.",
                        "Der Termin passt mir nicht."
                    ],
                    correct: 1,
                    explanation: "Man entschuldigt sich und bietet einen neuen Termin an."
                },
                {
                    question: "Sie m√∂chten im Restaurant sagen, dass das Essen kalt ist. Was sagen Sie?",
                    options: [
                        "Das Essen ist eiskalt!",
                        "Entschuldigung, mein Essen ist leider kalt. K√∂nnen Sie es bitte warm machen?",
                        "So kann ich das nicht essen!",
                        "Bringen Sie mir was Neues!"
                    ],
                    correct: 1,
                    explanation: "Auch bei Problemen bleibt man h√∂flich und sagt klar, was man m√∂chte."
                },
                {
                    question: "Sie verstehen eine Anweisung von Ihrem Chef nicht. Wie fragen Sie?",
                    options: [
                        "Was?",
                        "Entschuldigung, k√∂nnen Sie das bitte noch einmal erkl√§ren?",
                        "Ich verstehe Sie nicht.",
                        "Das habe ich nicht verstanden!"
                    ],
                    correct: 1,
                    explanation: "H√∂fliche Fragen zeigen, dass man interessiert ist."
                },
                {
                    question: "Ein Nachbar beschwert sich √ºber L√§rm. Wie reagieren Sie?",
                    options: [
                        "Das geht Sie nichts an!",
                        "Es tut mir leid, ich werde in Zukunft leiser sein.",
                        "Sie machen doch auch L√§rm!",
                        "Ist doch nicht so schlimm."
                    ],
                    correct: 1,
                    explanation: "Man nimmt Beschwerden ernst und reagiert freundlich."
                },
                {
                    question: "Sie m√∂chten um eine Gehaltserh√∂hung bitten. Wie machen Sie das?",
                    options: [
                        "Ich will mehr Geld!",
                        "Ich m√∂chte gerne mit Ihnen √ºber mein Gehalt sprechen. Haben Sie Zeit?",
                        "Ich verdiene zu wenig!",
                        "Alle verdienen mehr als ich!"
                    ],
                    correct: 1,
                    explanation: "Man bittet h√∂flich um ein Gespr√§ch."
                },
                {
                    question: "Sie m√ºssen sich bei einem Kunden entschuldigen. Was sagen Sie?",
                    options: [
                        "Das wollte ich nicht!",
                        "Es tut mir sehr leid. Wie k√∂nnen wir das Problem l√∂sen?",
                        "Das war nicht meine Schuld.",
                        "Sorry!"
                    ],
                    correct: 1,
                    explanation: "Man entschuldigt sich und bietet eine L√∂sung an."
                },
                {
                    question: "Wie bitten Sie h√∂flich um Hilfe beim Tragen?",
                    options: [
                        "Hilf mir mal!",
                        "K√∂nnen Sie mir bitte helfen?",
                        "Mach das f√ºr mich!",
                        "Du musst mir helfen!"
                    ],
                    correct: 1,
                    explanation: "H√∂fliche Bitten brauchen 'bitte' und eine Frage."
                },
                {
                    question: "Sie kommen zu sp√§t zur Arbeit. Was sagen Sie Ihrem Chef?",
                    options: [
                        "Der Bus war zu sp√§t.",
                        "Es tut mir sehr leid. Der Bus hatte Versp√§tung. Das passiert nicht wieder.",
                        "Ich konnte nichts daf√ºr.",
                        "Sorry, ich bin zu sp√§t."
                    ],
                    correct: 1,
                    explanation: "Man entschuldigt sich, erkl√§rt kurz und zeigt, dass es einem wichtig ist."
                },
                {
                    question: "Wie fragen Sie h√∂flich nach dem Weg?",
                    options: [
                        "Wo ist das Rathaus?",
                        "Entschuldigung, k√∂nnen Sie mir bitte sagen, wie ich zum Rathaus komme?",
                        "Rathaus?",
                        "Ich suche das Rathaus."
                    ],
                    correct: 1,
                    explanation: "H√∂fliche Fragen beginnen mit 'Entschuldigung' oder 'k√∂nnen Sie'."
                },
                {
                    question: "Sie m√∂chten in einem Meeting widersprechen. Wie machen Sie das?",
                    options: [
                        "Das stimmt nicht!",
                        "Ich habe da eine andere Meinung. Darf ich das kurz sagen?",
                        "Nein, das ist falsch!",
                        "Ich bin dagegen!"
                    ],
                    correct: 1,
                    explanation: "Man widerspricht professionell und fragt, ob man seine Meinung sagen darf."
                },
                {
                    question: "Wie reagieren Sie auf ein Kompliment?",
                    options: [
                        "Ja, ich wei√ü.",
                        "Vielen Dank, das freut mich sehr!",
                        "Ach, das war nichts Besonderes.",
                        "Okay."
                    ],
                    correct: 1,
                    explanation: "Man nimmt Komplimente freundlich an und bedankt sich."
                },
                {
                    question: "Sie m√∂chten einen Termin beim Arzt. Wie beginnen Sie das Telefonat?",
                    options: [
                        "Ich brauche einen Termin.",
                        "Guten Tag, mein Name ist ... Ich m√∂chte gerne einen Termin.",
                        "Wann kann ich kommen?",
                        "Termin bitte!"
                    ],
                    correct: 1,
                    explanation: "Am Telefon sagt man seinen Namen und was man m√∂chte."
                },
                {
                    question: "Wie lehnen Sie eine Einladung ab, ohne zu verletzen?",
                    options: [
                        "Nein, ich will nicht.",
                        "Das ist sehr nett, aber ich habe leider schon etwas vor. Vielleicht ein anderes Mal?",
                        "Keine Lust.",
                        "Ich komme nicht."
                    ],
                    correct: 1,
                    explanation: "Man lehnt h√∂flich ab, bedankt sich und bietet eine Alternative."
                },
                {
                    question: "Sie haben einen Fehler gemacht. Wie reagieren Sie?",
                    options: [
                        "Das war nicht meine Schuld!",
                        "Entschuldigung, ich habe einen Fehler gemacht. Ich k√ºmmere mich sofort darum.",
                        "Das wollte ich nicht!",
                        "Andere machen auch Fehler!"
                    ],
                    correct: 1,
                    explanation: "Man √ºbernimmt Verantwortung und bietet eine L√∂sung an."
                },
                {
                    question: "Wie fragen Sie h√∂flich, ob Sie rauchen d√ºrfen?",
                    options: [
                        "Ich rauche jetzt.",
                        "St√∂rt es Sie, wenn ich rauche?",
                        "Darf man hier rauchen?",
                        "Ich gehe rauchen."
                    ],
                    correct: 1,
                    explanation: "Man fragt h√∂flich und denkt an die anderen Personen."
                },
                {
                    question: "Wie bedanken Sie sich f√ºr eine Einladung zum Essen?",
                    options: [
                        "Danke.",
                        "Vielen Dank f√ºr die Einladung. Das Essen war wirklich sehr gut!",
                        "War gut.",
                        "Okay, danke."
                    ],
                    correct: 1,
                    explanation: "Man bedankt sich ausf√ºhrlich und macht ein Kompliment."
                }
            ],
            zuordnung: [
                {
                    question: "Ordne formell und informell zu:",
                    leftItems: ["Guten Tag", "Auf Wiedersehen", "Entschuldigung", "Vielen Dank", "Wie geht es Ihnen?"],
                    rightItems: ["Hallo", "Tsch√ºss", "Sorry", "Danke", "Wie geht's?"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "Formelle Ausdr√ºcke verwendet man bei fremden Personen und bei der Arbeit."
                },
                {
                    question: "Welches Redemittel passt zur Funktion?",
                    leftItems: ["Ich finde, dass...", "Ich bin nicht einverstanden.", "Ich schlage vor, dass...", "Da stimme ich zu.", "K√∂nnen Sie bitte..."],
                    rightItems: ["Meinung sagen", "Widersprechen", "Vorschlag machen", "Zustimmen", "H√∂flich bitten"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "F√ºr jede Sprachhandlung gibt es typische S√§tze."
                },
                {
                    question: "Ordne die Situationen den Orten zu:",
                    leftItems: ["Termin machen", "Paket abholen", "Rezept holen", "Geld abheben", "Anmelden"],
                    rightItems: ["Arztpraxis", "Post", "Apotheke", "Bank", "Einwohnermeldeamt"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "Verschiedene √Ñmter und Stellen haben verschiedene Aufgaben."
                },
                {
                    question: "Was passt zusammen - Frage und Antwort?",
                    leftItems: ["Wie geht es dir?", "Woher kommst du?", "Was arbeitest du?", "Wo wohnst du?", "Seit wann lernst du Deutsch?"],
                    rightItems: ["Sehr gut, danke!", "Aus Syrien.", "Ich bin Ingenieur.", "In Kiel.", "Seit zwei Jahren."],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "Typische Fragen beim Kennenlernen und ihre Antworten."
                },
                {
                    question: "Ordne die Uhrzeiten zu:",
                    leftItems: ["7:00", "12:00", "15:30", "18:45", "23:00"],
                    rightItems: ["sieben Uhr", "zw√∂lf Uhr", "halb vier", "Viertel vor sieben", "dreiundzwanzig Uhr"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "Deutsche Uhrzeitangaben kann man unterschiedlich sagen."
                },
                {
                    question: "Welches Verkehrsmittel passt zur Beschreibung?",
                    leftItems: ["F√§hrt unter der Erde", "Fliegt in der Luft", "F√§hrt auf Schienen", "Zwei R√§der", "Schwimmt auf dem Wasser"],
                    rightItems: ["U-Bahn", "Flugzeug", "Zug", "Fahrrad", "Schiff"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "Jedes Verkehrsmittel hat typische Merkmale."
                },
                {
                    question: "Ordne die Jahreszeiten den Monaten zu:",
                    leftItems: ["M√§rz - Mai", "Juni - August", "September - November", "Dezember - Februar"],
                    rightItems: ["Fr√ºhling", "Sommer", "Herbst", "Winter"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3]],
                    explanation: "Das Jahr hat vier Jahreszeiten."
                },
                {
                    question: "Was geh√∂rt zusammen - Problem und L√∂sung?",
                    leftItems: ["Kopfschmerzen", "Zahnschmerzen", "Erk√§ltung", "R√ºckenschmerzen", "Fieber"],
                    rightItems: ["Schmerztablette", "Zahnarzt", "Ruhe und Tee", "Physiotherapie", "Fiebersaft"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "F√ºr verschiedene Probleme gibt es passende L√∂sungen."
                },
                {
                    question: "Ordne die Berufe den Arbeitsorten zu:",
                    leftItems: ["Lehrer", "Krankenpfleger", "Koch", "Verk√§ufer", "Mechaniker"],
                    rightItems: ["Schule", "Krankenhaus", "Restaurant", "Gesch√§ft", "Werkstatt"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "Jeder Beruf hat typische Arbeitsorte."
                },
                {
                    question: "Welcher Satz passt zur Situation?",
                    leftItems: ["Im Restaurant bestellen", "Beim Arzt", "Im Supermarkt", "Am Bahnhof", "In der Bank"],
                    rightItems: ["Ich h√§tte gerne...", "Mir tut ... weh", "Wo finde ich...?", "Wann f√§hrt der Zug?", "Ich m√∂chte Geld abheben"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "In verschiedenen Situationen sagt man typische S√§tze."
                },
                {
                    question: "Ordne die Konnektoren ihrer Bedeutung zu:",
                    leftItems: ["weil", "obwohl", "wenn", "dass", "damit"],
                    rightItems: ["Grund", "Gegensatz", "Bedingung", "Indirekte Rede", "Zweck"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "Konnektoren haben verschiedene Bedeutungen."
                },
                {
                    question: "Was passt zur Tageszeit?",
                    leftItems: ["6:00 - 10:00", "12:00 - 13:00", "15:00 - 17:00", "18:00 - 22:00", "22:00 - 6:00"],
                    rightItems: ["Morgen", "Mittag", "Nachmittag", "Abend", "Nacht"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "Der Tag hat verschiedene Zeitabschnitte."
                },
                {
                    question: "Ordne die Pr√§positionen den F√§llen zu:",
                    leftItems: ["mit, nach, von", "f√ºr, um, durch", "an, auf, in (Wohin?)", "an, auf, in (Wo?)"],
                    rightItems: ["Dativ", "Akkusativ", "Akkusativ", "Dativ"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3]],
                    explanation: "Pr√§positionen brauchen bestimmte F√§lle."
                },
                {
                    question: "Welches Wort geh√∂rt zur Wortfamilie?",
                    leftItems: ["arbeiten", "wohnen", "fahren", "kaufen", "sprechen"],
                    rightItems: ["die Arbeit", "die Wohnung", "die Fahrt", "der Kauf", "die Sprache"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "W√∂rter einer Familie haben den gleichen Stamm."
                },
                {
                    question: "Ordne die W√ºnsche den Situationen zu:",
                    leftItems: ["Gute Besserung!", "Herzlichen Gl√ºckwunsch!", "Viel Erfolg!", "Guten Appetit!", "Gesundheit!"],
                    rightItems: ["Jemand ist krank", "Geburtstag", "Pr√ºfung", "Essen", "Niesen"],
                    correctPairs: [[0,0], [1,1], [2,2], [3,3], [4,4]],
                    explanation: "F√ºr verschiedene Situationen gibt es typische W√ºnsche."
                }
            ],
            sprachhandlung: [
                {
                    question: "Es tut mir leid, ich habe einen Fehler gemacht.",
                    options: ["Entschuldigung", "Erkl√§rung", "Beschwerde", "Vorschlag"],
                    correct: 0,
                    explanation: "Die Person entschuldigt sich f√ºr den Fehler."
                },
                {
                    question: "Ich schlage vor, dass wir morgen um 10 Uhr anfangen.",
                    options: ["Zustimmung", "Vorschlag", "Ablehnung", "Frage"],
                    correct: 1,
                    explanation: "Die Person macht einen Vorschlag f√ºr die Zeit."
                },
                {
                    question: "Ich bin nicht einverstanden mit dieser Idee.",
                    options: ["Zustimmung", "Frage", "Ablehnung", "Entschuldigung"],
                    correct: 2,
                    explanation: "Die Person lehnt die Idee ab / widerspricht."
                },
                {
                    question: "Das Essen ist kalt und schmeckt nicht gut.",
                    options: ["Beschwerde", "Entschuldigung", "Zustimmung", "Frage"],
                    correct: 0,
                    explanation: "Die Person beschwert sich √ºber das Essen."
                },
                {
                    question: "K√∂nnen Sie mir bitte helfen?",
                    options: ["Bitte um Hilfe", "Vorschlag", "Ablehnung", "Erkl√§rung"],
                    correct: 0,
                    explanation: "Die Person bittet um Hilfe."
                },
                {
                    question: "Da haben Sie recht, das ist eine gute Idee.",
                    options: ["Ablehnung", "Zustimmung", "Beschwerde", "Frage"],
                    correct: 1,
                    explanation: "Die Person stimmt zu / ist einverstanden."
                },
                {
                    question: "Ich kann leider nicht kommen, weil ich krank bin.",
                    options: ["Ablehnung mit Grund", "Zustimmung", "Beschwerde", "Vorschlag"],
                    correct: 0,
                    explanation: "Die Person lehnt ab und gibt einen Grund."
                },
                {
                    question: "Vielen Dank f√ºr Ihre Hilfe!",
                    options: ["Dank", "Entschuldigung", "Beschwerde", "Frage"],
                    correct: 0,
                    explanation: "Die Person bedankt sich."
                },
                {
                    question: "Ich verstehe das nicht. K√∂nnen Sie das erkl√§ren?",
                    options: ["Frage / Bitte um Erkl√§rung", "Vorschlag", "Zustimmung", "Ablehnung"],
                    correct: 0,
                    explanation: "Die Person fragt nach und bittet um Erkl√§rung."
                },
                {
                    question: "Ich glaube, da ist ein Problem.",
                    options: ["Hinweis auf Problem", "Zustimmung", "Dank", "Vorschlag"],
                    correct: 0,
                    explanation: "Die Person macht auf ein Problem aufmerksam."
                },
                {
                    question: "Wie w√§re es, wenn wir zusammen gehen?",
                    options: ["Vorschlag", "Ablehnung", "Beschwerde", "Entschuldigung"],
                    correct: 0,
                    explanation: "Die Person macht einen Vorschlag."
                },
                {
                    question: "Das war meine Schuld, es tut mir wirklich leid.",
                    options: ["Entschuldigung", "Vorschlag", "Frage", "Zustimmung"],
                    correct: 0,
                    explanation: "Die Person entschuldigt sich und √ºbernimmt Verantwortung."
                },
                {
                    question: "Ich bin der Meinung, dass wir das anders machen sollten.",
                    options: ["Meinung √§u√üern", "Entschuldigung", "Dank", "Frage"],
                    correct: 0,
                    explanation: "Die Person sagt ihre Meinung."
                },
                {
                    question: "Die Waschmaschine ist kaputt. K√∂nnen Sie das reparieren?",
                    options: ["Problem + Bitte", "Dank", "Zustimmung", "Ablehnung"],
                    correct: 0,
                    explanation: "Die Person nennt ein Problem und bittet um Hilfe."
                },
                {
                    question: "Das finde ich auch. Gute Idee!",
                    options: ["Zustimmung", "Ablehnung", "Beschwerde", "Frage"],
                    correct: 0,
                    explanation: "Die Person stimmt zu und findet die Idee gut."
                },
                {
                    question: "Ich bin nicht sicher, ob das funktioniert.",
                    options: ["Zweifel √§u√üern", "Zustimmung", "Dank", "Entschuldigung"],
                    correct: 0,
                    explanation: "Die Person hat Zweifel / ist unsicher."
                },
                {
                    question: "K√∂nnten Sie bitte das Fenster schlie√üen?",
                    options: ["H√∂fliche Bitte", "Beschwerde", "Vorschlag", "Frage"],
                    correct: 0,
                    explanation: "Die Person bittet h√∂flich um etwas."
                },
                {
                    question: "Ich habe den Bus verpasst, deshalb komme ich zu sp√§t.",
                    options: ["Erkl√§rung / Grund geben", "Entschuldigung", "Beschwerde", "Vorschlag"],
                    correct: 0,
                    explanation: "Die Person gibt eine Erkl√§rung / einen Grund."
                },
                {
                    question: "Das geht leider nicht. Ich habe schon einen Termin.",
                    options: ["Ablehnung mit Grund", "Zustimmung", "Beschwerde", "Dank"],
                    correct: 0,
                    explanation: "Die Person lehnt ab und erkl√§rt warum."
                },
                {
                    question: "Ich gratuliere Ihnen zum Geburtstag!",
                    options: ["Gratulation / Gl√ºckwunsch", "Dank", "Entschuldigung", "Frage"],
                    correct: 0,
                    explanation: "Die Person gratuliert."
                },
                {
                    question: "Ich brauche mehr Zeit f√ºr die Aufgabe.",
                    options: ["Bitte / Wunsch √§u√üern", "Beschwerde", "Dank", "Zustimmung"],
                    correct: 0,
                    explanation: "Die Person √§u√üert einen Wunsch / eine Bitte."
                },
                {
                    question: "Wann beginnt der Kurs?",
                    options: ["Frage nach Information", "Vorschlag", "Ablehnung", "Beschwerde"],
                    correct: 0,
                    explanation: "Die Person fragt nach einer Information."
                },
                {
                    question: "Das verstehe ich nicht ganz. Was meinen Sie damit?",
                    options: ["Nachfrage", "Zustimmung", "Ablehnung", "Dank"],
                    correct: 0,
                    explanation: "Die Person fragt nach, weil sie etwas nicht versteht."
                },
                {
                    question: "Ich empfehle Ihnen, zum Arzt zu gehen.",
                    options: ["Rat / Empfehlung geben", "Beschwerde", "Dank", "Frage"],
                    correct: 0,
                    explanation: "Die Person gibt einen Rat / eine Empfehlung."
                },
                {
                    question: "Das ist mir leider zu teuer.",
                    options: ["Ablehnung mit Grund", "Zustimmung", "Dank", "Beschwerde"],
                    correct: 0,
                    explanation: "Die Person lehnt ab und gibt einen Grund (Preis)."
                }
            ],
            situation: [
                {
                    question: "Sie sind im Supermarkt und suchen Milch. Was fragen Sie?",
                    options: [
                        "Milch!",
                        "Entschuldigung, wo finde ich die Milch?",
                        "Ich brauche Milch.",
                        "Wo ist hier Milch?"
                    ],
                    correct: 1,
                    explanation: "Man fragt h√∂flich mit 'Entschuldigung'."
                },
                {
                    question: "Ihr Nachbar parkt vor Ihrer Garage. Was sagen Sie?",
                    options: [
                        "Ihr Auto steht falsch!",
                        "Entschuldigung, k√∂nnen Sie Ihr Auto bitte wegfahren? Sie stehen vor meiner Garage.",
                        "Fahren Sie weg!",
                        "Das geht nicht!"
                    ],
                    correct: 1,
                    explanation: "Auch bei Problemen bleibt man h√∂flich und erkl√§rt das Problem."
                },
                {
                    question: "Sie kommen 10 Minuten zu sp√§t zum Vorstellungsgespr√§ch. Was sagen Sie?",
                    options: [
                        "Sorry.",
                        "Entschuldigung f√ºr die Versp√§tung. Der Zug hatte Versp√§tung.",
                        "Ich bin zu sp√§t.",
                        "Der Zug kam nicht."
                    ],
                    correct: 1,
                    explanation: "Man entschuldigt sich und gibt eine kurze Erkl√§rung."
                },
                {
                    question: "Im Restaurant schmeckt das Essen nicht. Was machen Sie?",
                    options: [
                        "Ich esse einfach nichts.",
                        "Entschuldigung, das Essen schmeckt leider nicht gut. K√∂nnen Sie bitte...",
                        "Das schmeckt nicht!",
                        "Ich will mit dem Chef sprechen."
                    ],
                    correct: 1,
                    explanation: "Man sagt h√∂flich, was das Problem ist."
                },
                {
                    question: "Sie verstehen die Hausaufgabe nicht. Was fragen Sie?",
                    options: [
                        "Ich verstehe das nicht!",
                        "Entschuldigung, k√∂nnen Sie mir bitte die Aufgabe noch einmal erkl√§ren?",
                        "Was soll ich machen?",
                        "Ich kann das nicht."
                    ],
                    correct: 1,
                    explanation: "Man fragt h√∂flich um Hilfe."
                },
                {
                    question: "Ihre Waschmaschine ist kaputt. Was sagen Sie dem Vermieter?",
                    options: [
                        "Die Waschmaschine ist kaputt!",
                        "Guten Tag, die Waschmaschine funktioniert leider nicht mehr. K√∂nnen Sie sich darum k√ºmmern?",
                        "Ich brauche eine neue Waschmaschine.",
                        "Reparieren Sie das!"
                    ],
                    correct: 1,
                    explanation: "Man informiert den Vermieter sachlich und bittet um Hilfe."
                },
                {
                    question: "Sie m√∂chten Urlaub nehmen. Was sagen Sie Ihrem Chef?",
                    options: [
                        "Ich nehme n√§chste Woche frei.",
                        "Ich m√∂chte gerne vom ... bis ... Urlaub nehmen. Ist das m√∂glich?",
                        "Ich brauche Urlaub.",
                        "Ich bin dann weg."
                    ],
                    correct: 1,
                    explanation: "Man fragt h√∂flich, ob man Urlaub nehmen kann."
                },
                {
                    question: "Jemand raucht im Nichtraucher-Bereich. Was sagen Sie?",
                    options: [
                        "Rauchen verboten!",
                        "Entschuldigung, aber hier ist ein Nichtraucher-Bereich. K√∂nnen Sie bitte drau√üen rauchen?",
                        "H√∂ren Sie auf zu rauchen!",
                        "Das d√ºrfen Sie nicht!"
                    ],
                    correct: 1,
                    explanation: "Man sagt h√∂flich, was die Regel ist."
                },
                {
                    question: "Sie haben im Bus Ihre Tasche vergessen. Was tun Sie?",
                    options: [
                        "Ich rufe die Polizei.",
                        "Ich gehe zum Fundb√ºro und beschreibe die Tasche.",
                        "Die ist jetzt weg.",
                        "Ich kaufe eine neue."
                    ],
                    correct: 1,
                    explanation: "Verlorene Sachen meldet man beim Fundb√ºro."
                },
                {
                    question: "Ein Kollege bittet Sie, seine Arbeit zu machen. Sie haben keine Zeit. Was sagen Sie?",
                    options: [
                        "Nein, mach das selbst!",
                        "Tut mir leid, aber ich habe selbst viel zu tun. Vielleicht kann dir jemand anders helfen?",
                        "Ich habe keine Zeit.",
                        "Frag jemand anderen."
                    ],
                    correct: 1,
                    explanation: "Man lehnt h√∂flich ab und erkl√§rt warum."
                },
                {
                    question: "Sie finden einen Geldbeutel auf der Stra√üe. Was machen Sie?",
                    options: [
                        "Ich behalte ihn.",
                        "Ich bringe ihn zur Polizei oder zum Fundb√ºro.",
                        "Ich schaue, ob Geld drin ist.",
                        "Ich werfe ihn in den M√ºll."
                    ],
                    correct: 1,
                    explanation: "Gefundene Sachen gibt man bei der Polizei ab."
                },
                {
                    question: "Sie haben keine Krankenversicherung, aber m√ºssen zum Arzt. Was tun Sie?",
                    options: [
                        "Ich gehe nicht zum Arzt.",
                        "Ich gehe zum Arzt und sage, dass ich selbst bezahle.",
                        "Ich warte, bis es besser wird.",
                        "Ich frage Freunde nach Medikamenten."
                    ],
                    correct: 1,
                    explanation: "Man kann auch ohne Versicherung zum Arzt gehen und selbst bezahlen."
                },
                {
                    question: "Ihr Kind ist krank und kann nicht zur Schule. Was machen Sie?",
                    options: [
                        "Ich schicke es trotzdem.",
                        "Ich rufe morgens in der Schule an und sage Bescheid.",
                        "Die Schule merkt das schon.",
                        "Ich schreibe eine SMS."
                    ],
                    correct: 1,
                    explanation: "Man ruft in der Schule an und meldet das Kind krank."
                },
                {
                    question: "Sie bekommen eine zu hohe Rechnung. Was tun Sie?",
                    options: [
                        "Ich zahle einfach nicht.",
                        "Ich rufe die Firma an und frage, warum die Rechnung so hoch ist.",
                        "Ich werfe die Rechnung weg.",
                        "Ich warte ab."
                    ],
                    correct: 1,
                    explanation: "Man kl√§rt Probleme direkt mit der Firma."
                },
                {
                    question: "Ein Freund l√§dt Sie zum Essen ein, aber Sie essen kein Fleisch. Was sagen Sie?",
                    options: [
                        "Ich esse kein Fleisch!",
                        "Das ist sehr nett! Ich esse aber kein Fleisch. Geht das?",
                        "Ich komme nicht.",
                        "Ich esse nur Salat."
                    ],
                    correct: 1,
                    explanation: "Man sagt freundlich, was man isst und was nicht."
                },
                {
                    question: "Sie sehen einen Unfall. Was ist am wichtigsten?",
                    options: [
                        "Ich filme mit dem Handy.",
                        "Ich rufe den Notruf 112 an.",
                        "Ich gehe weiter.",
                        "Ich frage Leute."
                    ],
                    correct: 1,
                    explanation: "Bei Unf√§llen ruft man sofort den Notruf 112."
                },
                {
                    question: "Sie m√∂chten ein Paket abholen, haben aber den Ausweis vergessen. Was machen Sie?",
                    options: [
                        "Ich will mein Paket trotzdem haben.",
                        "Ich komme mit dem Ausweis wieder.",
                        "Ich zeige meine EC-Karte.",
                        "Ich beschreibe das Paket."
                    ],
                    correct: 1,
                    explanation: "Ohne Ausweis bekommt man kein Paket. Man muss wiederkommen."
                },
                {
                    question: "Ihr Nachbar feiert laut bis 3 Uhr nachts. Was tun Sie am n√§chsten Tag?",
                    options: [
                        "Ich rufe sofort die Polizei.",
                        "Ich spreche h√∂flich mit dem Nachbarn und bitte ihn, in Zukunft leiser zu sein.",
                        "Ich feiere auch laut.",
                        "Ich schreibe einen b√∂sen Brief."
                    ],
                    correct: 1,
                    explanation: "Man versucht zuerst, das Problem freundlich zu kl√§ren."
                },
                {
                    question: "Sie haben einen neuen Job. Wann kommen Sie am ersten Tag?",
                    options: [
                        "Wann ich will.",
                        "15-20 Minuten fr√ºher als vereinbart.",
                        "P√ºnktlich auf die Minute.",
                        "5-10 Minuten zu sp√§t ist okay."
                    ],
                    correct: 1,
                    explanation: "Am ersten Arbeitstag kommt man besser etwas fr√ºher."
                },
                {
                    question: "Sie verstehen einen Brief vom Amt nicht. Was machen Sie?",
                    options: [
                        "Ich werfe ihn weg.",
                        "Ich gehe zum Amt oder lasse mir helfen.",
                        "Ich ignoriere ihn.",
                        "Ich antworte einfach 'Ja'."
                    ],
                    correct: 1,
                    explanation: "Amtsbriefe sind wichtig. Man sollte sich helfen lassen."
                },
                {
                    question: "Sie m√∂chten einen Deutschkurs machen. Wo fragen Sie?",
                    options: [
                        "Im Supermarkt.",
                        "Bei der Volkshochschule oder beim Jobcenter.",
                        "Bei der Polizei.",
                        "In der Bank."
                    ],
                    correct: 1,
                    explanation: "Deutschkurse gibt es bei der Volkshochschule, beim Jobcenter oder bei privaten Schulen."
                },
                {
                    question: "Die Heizung in Ihrer Wohnung funktioniert nicht. Wen rufen Sie an?",
                    options: [
                        "Die Polizei.",
                        "Den Vermieter oder die Hausverwaltung.",
                        "Die Feuerwehr.",
                        "Das Jobcenter."
                    ],
                    correct: 1,
                    explanation: "Bei Problemen in der Wohnung kontaktiert man den Vermieter."
                },
                {
                    question: "Sie brauchen eine Arbeitserlaubnis. Wohin gehen Sie?",
                    options: [
                        "Zum Supermarkt.",
                        "Zur Ausl√§nderbeh√∂rde.",
                        "Zur Post.",
                        "Zur Schule."
                    ],
                    correct: 1,
                    explanation: "F√ºr Arbeitserlaubnis und Aufenthaltstitel ist die Ausl√§nderbeh√∂rde zust√§ndig."
                },
                {
                    question: "Sie haben eine Frage zu Ihrem Arbeitsvertrag. An wen wenden Sie sich?",
                    options: [
                        "An einen Freund.",
                        "An Ihren Chef oder eine Beratungsstelle.",
                        "An die Polizei.",
                        "An das Finanzamt."
                    ],
                    correct: 1,
                    explanation: "Bei Fragen zum Arbeitsvertrag hilft der Chef oder eine Beratungsstelle."
                },
                {
                    question: "Ihr Kind braucht einen Kitaplatz. Wo bewerben Sie sich?",
                    options: [
                        "Beim Arzt.",
                        "Bei der Kita direkt oder beim Jugendamt.",
                        "Bei der Polizei.",
                        "Beim Jobcenter."
                    ],
                    correct: 1,
                    explanation: "F√ºr einen Kitaplatz bewirbt man sich bei der Kita oder beim Jugendamt."
                },
                {
                    question: "Sie m√∂chten Ihr Auto anmelden. Wohin gehen Sie?",
                    options: [
                        "Zur Post.",
                        "Zur Zulassungsstelle / Kfz-Zulassungsstelle.",
                        "Zum Supermarkt.",
                        "Zur Bank."
                    ],
                    correct: 1,
                    explanation: "Autos meldet man bei der Zulassungsstelle an."
                },
                {
                    question: "Sie haben Probleme mit dem Jobcenter. Wer kann helfen?",
                    options: [
                        "Die Polizei.",
                        "Eine Beratungsstelle oder ein Anwalt.",
                        "Der Supermarkt.",
                        "Die Schule."
                    ],
                    correct: 1,
                    explanation: "Bei Problemen mit Beh√∂rden helfen Beratungsstellen oder Anw√§lte."
                },
                {
                    question: "Sie haben Zahnschmerzen. Was machen Sie?",
                    options: [
                        "Ich warte, bis es vorbei geht.",
                        "Ich rufe beim Zahnarzt an und mache einen Termin.",
                        "Ich nehme nur Schmerztabletten.",
                        "Ich gehe in die Apotheke und sage nichts."
                    ],
                    correct: 1,
                    explanation: "Bei Zahnschmerzen geht man zum Zahnarzt."
                },
                {
                    question: "Sie suchen eine Wohnung. Wo k√∂nnen Sie suchen?",
                    options: [
                        "Nur bei Freunden.",
                        "Im Internet, in der Zeitung oder bei einem Makler.",
                        "Nur beim Amt.",
                        "Nur bei der Polizei."
                    ],
                    correct: 1,
                    explanation: "Wohnungen findet man im Internet, in Zeitungen, bei Maklern oder √ºber Kontakte."
                },
                {
                    question: "Ihre EC-Karte ist weg. Was tun Sie zuerst?",
                    options: [
                        "Ich warte einen Tag.",
                        "Ich rufe sofort bei der Bank an und lasse die Karte sperren.",
                        "Ich suche weiter.",
                        "Ich gehe einkaufen."
                    ],
                    correct: 1,
                    explanation: "Bei verlorener Karte ruft man sofort die Bank an (116 116) und sperrt die Karte."
                }
            ]
        };


        let selectedLeft = null;
        let selectedRight = null;
        let matchedPairs = [];
        
        function loadMatchingExercise(exercise) {
            const container = document.getElementById('exerciseContainer');
            matchedPairs = [];
            selectedLeft = null;
            selectedRight = null;
            
            container.innerHTML = `
                <div class="question-box">
                    <div class="question-text">${exercise.question}</div>
                    <div class="matching-container">
                        <div class="matching-column">
                            ${exercise.leftItems.map((item, i) => 
                                `<div class="matching-item" id="left-${i}" onclick="selectLeft(${i})">${item}</div>`
                            ).join('')}
                        </div>
                        <div class="matching-column">
                            ${exercise.rightItems.map((item, i) => 
                                `<div class="matching-item" id="right-${i}" onclick="selectRight(${i})">${item}</div>`
                            ).join('')}
                        </div>
                    </div>
                    <div class="feedback-box" id="feedbackBox">
                        <div class="feedback-title" id="feedbackTitle"></div>
                        <div class="feedback-text" id="feedbackText"></div>
                    </div>
                </div>
            `;
            selectedAnswer = 0; // Mark as ready
        }
        
        function selectLeft(index) {
            // Deselect previous
            if (selectedLeft !== null) {
                document.getElementById('left-' + selectedLeft).classList.remove('selected');
            }
            
            selectedLeft = index;
            document.getElementById('left-' + index).classList.add('selected');
            
            // Check if we can make a pair
            if (selectedRight !== null) {
                makePair(selectedLeft, selectedRight);
            }
        }
        
        function selectRight(index) {
            // Deselect previous
            if (selectedRight !== null) {
                document.getElementById('right-' + selectedRight).classList.remove('selected');
            }
            
            selectedRight = index;
            document.getElementById('right-' + index).classList.add('selected');
            
            // Check if we can make a pair
            if (selectedLeft !== null) {
                makePair(selectedLeft, selectedRight);
            }
        }
        
        function makePair(leftIdx, rightIdx) {
            matchedPairs.push([leftIdx, rightIdx]);
            
            const leftEl = document.getElementById('left-' + leftIdx);
            const rightEl = document.getElementById('right-' + rightIdx);
            
            leftEl.classList.remove('selected');
            leftEl.classList.add('matched');
            leftEl.onclick = null;
            
            rightEl.classList.remove('selected');
            rightEl.classList.add('matched');
            rightEl.onclick = null;
            
            selectedLeft = null;
            selectedRight = null;
        }

                function backToUebungscamp() {
            showScreen('uebungscampScreen');
        }
    </script>
</body>
</html>
